module.exports=[84974,a=>{"use strict";a.s(["default",()=>cL],84974);var b=a.i(41940),c=a.i(96377),d=Object.defineProperty;((a,b)=>{for(var c in b)d(a,c,{get:b[c],enumerable:!0})})({},{CannotFindTransaction:()=>X,CertificateSignatureMismatch:()=>o,ContractCallError:()=>q,ContractDeploymentFailed:()=>p,HttpNetworkError:()=>x,InvalidAbiDataToEncodeOrDecode:()=>i,InvalidAbiItem:()=>j,InvalidAbiSignatureFormat:()=>k,InvalidAddress:()=>l,InvalidBloom:()=>m,InvalidBloomParams:()=>n,InvalidCommandLineArguments:()=>N,InvalidConfigurationFile:()=>P,InvalidConfigurationFilePath:()=>O,InvalidDataType:()=>r,InvalidHDKey:()=>u,InvalidHDKeyMnemonic:()=>t,InvalidHTTPParams:()=>w,InvalidHTTPRequest:()=>v,InvalidKeystore:()=>y,InvalidKeystoreParams:()=>z,InvalidOperation:()=>Z,InvalidRLP:()=>M,InvalidSecp256k1MessageHash:()=>R,InvalidSecp256k1PrivateKey:()=>Q,InvalidSecp256k1Signature:()=>S,InvalidTransactionField:()=>V,InvalidTransactionType:()=>Y,JSONRPCInternalError:()=>H,JSONRPCInvalidDefaultBlock:()=>I,JSONRPCInvalidParams:()=>G,JSONRPCInvalidRequest:()=>E,JSONRPCMethodNotFound:()=>F,JSONRPCMethodNotImplemented:()=>K,JSONRPCParseError:()=>D,JSONRPCProviderError:()=>C,JSONRPCServerError:()=>J,JSONRPCTransactionRevertError:()=>L,NotDelegatedTransaction:()=>W,PollExecution:()=>A,ProviderMethodError:()=>B,SignerMethodError:()=>T,UnavailableTransactionField:()=>U,UnsupportedOperation:()=>s,VechainSDKError:()=>h,assertInnerError:()=>f,createErrorMessage:()=>g,stringifyData:()=>e});var e=a=>JSON.stringify(a,(()=>{let a=new WeakSet;return(b,c)=>{if("object"==typeof c&&null!==c&&""!==b){if(a.has(c))return;a.add(c)}return"bigint"==typeof c?c.toString()+"n":c}})(),2);function f(a){return a instanceof Error?a:Error(`Inner error is not an instance of Error. Object:
	${e(a)}`)}function g(a,b,c,d){let f=d?.message!==void 0?`
-Internal error: 
	${d.message}`:"";return`Method '${a}' failed.
-Reason: '${b}'
-Parameters: 
	${e(c)}`+f}var h=class extends Error{constructor(a,b,c,d){super(g(a,b,c,void 0===d?void 0:f(d))),this.methodName=a,this.errorMessage=b,this.data=c,this.innerError=d}},i=class extends h{},j=class extends h{},k=class extends h{},l=class extends h{},m=class extends h{},n=class extends h{},o=class extends h{},p=class extends h{},q=class extends h{},r=class extends h{},s=class extends h{},t=class extends h{},u=class extends h{},v=class extends h{},w=class extends h{},x=class extends h{},y=class extends h{},z=class extends h{},A=class extends h{},B=class extends h{},C=class extends h{constructor(a,b,c,d,e){super(a,c,{code:b,message:c,data:d},e),this.methodName=a,this.innerError=e}},D=class extends C{constructor(a,b,c,d){super(a,-32700,b,c,d),this.methodName=a,this.innerError=d}},E=class extends C{constructor(a,b,c,d){super(a,-32600,b,c,d),this.methodName=a,this.innerError=d}},F=class extends C{constructor(a,b,c,d){super(a,-32601,b,c,d),this.methodName=a,this.innerError=d}},G=class extends C{constructor(a,b,c,d){super(a,-32602,b,c,d),this.methodName=a,this.innerError=d}},H=class extends C{constructor(a,b,c,d){super(a,-32603,b,c,d),this.methodName=a,this.innerError=d}},I=class extends h{},J=class extends C{constructor(a,b,c,d){super(a,-32e3,b,c,d),this.methodName=a,this.innerError=d}},K=class extends C{constructor(a,b,c,d){super(a,-32004,b,c,d),this.methodName=a,this.innerError=d}},L=class extends Error{code;data;message;constructor(a,b){super(a||"execution reverted"),this.message=a,this.name="JSONRPCTransactionRevertError",this.code=-32e3,this.data=b,Object.setPrototypeOf(this,new.target.prototype)}},M=class extends h{},N=class extends h{},O=class extends h{},P=class extends h{},Q=class extends h{},R=class extends h{},S=class extends h{},T=class extends h{},U=class extends h{},V=class extends h{},W=class extends h{},X=class extends h{},Y=class extends h{},Z=class extends h{},$=a.i(77239),_=a.i(27699),aa=a.i(22231),ab=a.i(4850),ac=a.i(2694),ad=a.i(2754),ae=a.i(72507),af=a.i(29463),ag=Object.defineProperty;((a,b)=>{for(var c in b)ag(a,c,{get:b[c],enumerable:!0})})({},{AccountDetail:()=>ap,AccountsModule:()=>aK,BUILT_IN_CONTRACTS:()=>aq,BlocksModule:()=>aL,CHAIN_ID:()=>bh,CHAIN_TAG:()=>bi,Contract:()=>aS,ContractFactory:()=>aT,ContractsModule:()=>aU,DebugModule:()=>aV,DefaultBlockToRevision:()=>bg,DelegationHandler:()=>a3,ERROR_SELECTOR:()=>au,ForkDetector:()=>a6,GasModule:()=>aW,HTTPS_REGEX:()=>as,HTTP_REGEX:()=>ar,HardhatVeChainProvider:()=>cq,HttpMethod:()=>ah,JSONRPCEthersProvider:()=>bd,LogsModule:()=>aX,MAINNET_URL:()=>aw,NODE_HEALTHCHECK_TOLERANCE_IN_SECONDS:()=>at,NodesModule:()=>aZ,PANIC_SELECTOR:()=>av,POLLING_INTERVAL:()=>be,Poll:()=>aD,ProviderInternalBaseWallet:()=>bb,ProviderInternalHDWallet:()=>bc,RPCMethodsMap:()=>co,RPC_DOCUMENTATION_URL:()=>az,RPC_METHODS:()=>ao,SimpleHttpClient:()=>am,TESTNET_URL:()=>ax,THOR_SOLO_URL:()=>ay,ThorClient:()=>a7,TransactionsModule:()=>a1,VeChainAbstractSigner:()=>a8,VeChainPrivateKeySigner:()=>a9,VeChainProvider:()=>cp,blocksFormatter:()=>bp,buildQuery:()=>aA,chainTagToChainId:()=>bj,debugFormatter:()=>br,debugTraceBlockByHash:()=>bE,debugTraceBlockByNumber:()=>bG,debugTraceCall:()=>bH,debugTraceTransaction:()=>bC,engineGetPayloadBodiesByHashV1:()=>bI,engineGetPayloadBodiesByRangeV1:()=>bJ,ethAccounts:()=>bK,ethBlockNumber:()=>bL,ethCall:()=>bM,ethChainId:()=>by,ethEstimateGas:()=>bN,ethFeeHistory:()=>bO,ethGasPrice:()=>bP,ethGetBalance:()=>bQ,ethGetBlockByHash:()=>bD,ethGetBlockByNumber:()=>bF,ethGetBlockReceipts:()=>bR,ethGetBlockTransactionCountByHash:()=>bS,ethGetBlockTransactionCountByNumber:()=>bT,ethGetCode:()=>bU,ethGetFilterChanges:()=>bV,ethGetFilterLogs:()=>bW,ethGetLogs:()=>bX,ethGetStorageAt:()=>bY,ethGetTransactionByBlockHashAndIndex:()=>b$,ethGetTransactionByBlockNumberAndIndex:()=>b_,ethGetTransactionByHash:()=>bZ,ethGetTransactionCount:()=>b0,ethGetTransactionReceipt:()=>bB,ethGetUncleByBlockHashAndIndex:()=>b1,ethGetUncleByBlockNumberAndIndex:()=>b2,ethGetUncleCountByBlockHash:()=>b3,ethGetUncleCountByBlockNumber:()=>b4,ethMaxPriorityFeePerGas:()=>b5,ethRequestAccounts:()=>b6,ethSendRawTransaction:()=>b7,ethSendTransaction:()=>b8,ethSignTransaction:()=>b9,ethSignTypedDataV4:()=>ca,ethSubscribe:()=>cb,ethSyncing:()=>cc,ethUnsubscribe:()=>cd,evmMine:()=>ce,formatToLogsRPC:()=>bs,formatToRPCStandard:()=>bq,getCachedChainId:()=>bz,getCachedChainTag:()=>bA,getCriteriaSetForInput:()=>bt,getNumberOfLogsAheadOfTransactionIntoBlockExpanded:()=>bl,getTransactionIndexIntoBlock:()=>bk,isTraceEnabled:()=>ai,logError:()=>al,logRequest:()=>aj,logResponse:()=>ak,netListening:()=>cf,netPeerCount:()=>cg,netVersion:()=>ch,sanitizeWebsocketBaseURL:()=>aF,signerUtils:()=>an,subscriptions:()=>aH,thorest:()=>aG,toQueryString:()=>aE,transactionsFormatter:()=>bo,txPoolContent:()=>ci,txPoolContentFrom:()=>cj,txPoolInspect:()=>ck,txPoolStatus:()=>cl,vnsUtils:()=>aJ,web3ClientVersion:()=>cm,web3Sha3:()=>cn});var ah=(a=>(a.GET="GET",a.POST="POST",a))(ah||{}),ai=()=>{let a=process?.env?.SDK_TRACE?.toLowerCase();return"true"===a||"1"===a},aj=(a,b,c,d)=>{if(!ai())return Date.now();let e=Date.now();if(console.log(`
\u26A1 [TRACE] HTTP Request (${new Date(e).toISOString()})`),console.log(`\u27A1\uFE0F ${JSON.stringify({category:"HTTP Request",method:a,url:b,requestHeaders:c,requestBody:d,timestamp:e},null,2)}`),null!=c&&Object.keys(c).length>0&&(console.log("ðŸ“‹ Headers:"),Object.entries(c).forEach(([a,b])=>{console.log(`   ${a}: ${b}`)})),void 0!==d){console.log("ðŸ“¦ Body:");try{console.log("string"==typeof d?d:JSON.stringify(d,null,2))}catch{console.log("[Complex body object]")}}return e},ak=(a,b,c,d)=>{if(!ai())return;let e=Date.now(),f=e-a;if(console.log(`
\u26A1 [TRACE] HTTP Response (${new Date(e).toISOString()})`),console.log(`\u27A1\uFE0F ${JSON.stringify({category:"HTTP Response",url:b,responseHeaders:c,responseBody:d,timestamp:e,duration:f},null,2)}`),console.log(`\u2B05\uFE0F ${b} (${f}ms)`),null!=c&&Object.keys(c).length>0&&(console.log("ðŸ“‹ Headers:"),Object.entries(c).forEach(([a,b])=>{console.log(`   ${a}: ${b}`)})),null!==d){console.log("ðŸ“¦ Body:");try{console.log("string"==typeof d?d:JSON.stringify(d,null,2))}catch{console.log("[Complex response body]")}}},al=(a,b,c,d)=>{if(!ai())return;let e=Date.now(),f=e-a;console.log(`
\u26A1 [TRACE] HTTP Error (${new Date(e).toISOString()})`),console.log(`\u27A1\uFE0F ${JSON.stringify({category:"HTTP Error",method:c,url:b,error:d,timestamp:e,duration:f},null,2)}`),console.log(`\u274C ${c} ${b} (${f}ms)`),console.log("â›” Error:"),null!=d&&d instanceof Error?(console.log(`   ${d.name}: ${d.message}`),null!=d.stack&&console.log(`   Stack: ${d.stack}`),"cause"in d&&null!=d.cause&&(console.log("   Cause:"),console.log(d.cause))):console.log(d)},am=class a{static DEFAULT_TIMEOUT=1e4;baseURL;headers;timeout;constructor(b,c=new Headers,d=a.DEFAULT_TIMEOUT){this.baseURL=b,this.timeout=d,this.headers=c}async get(a,b){return await this.http("GET",a,b)}isValidUrl(a){try{return new URL(a),!0}catch{return!1}}async http(a,b,c){let d=new AbortController,e=setTimeout(()=>{d.abort()},this.timeout),f,g=Date.now(),h={};try{let e;b.startsWith("/")&&(b=b.slice(1));let i=this.baseURL;i.endsWith("/")||(i+="/"),f=/^https?:\/\//.exec(b)?new URL(b):new URL(b,i),c?.query&&void 0!==f&&Object.entries(c.query).forEach(([a,b])=>{f.searchParams.append(a,String(b))}),c?.query!==void 0&&c?.query!=null&&void 0!==f&&Object.entries(c.query).forEach(([a,b])=>{f.searchParams.append(a,String(b))});let j=new Headers(this.headers);c?.headers!==void 0&&c?.headers!=null&&Object.entries(c.headers).forEach(([a,b])=>{j.append(a,String(b))}),h=Object.fromEntries(j.entries()),g=aj(a,f.toString(),h,"GET"!==a?c?.body:void 0);let k=await fetch(f.toString(),{method:a,headers:j,body:"GET"!==a?c?.rawBody!==void 0?c.rawBody:JSON.stringify(c?.body):void 0,signal:d.signal}),l=Object.fromEntries(k.headers.entries());if(k.ok){c?.validateResponseHeader!=null&&null!=l&&c.validateResponseHeader(l);let a=await k.json();return ak(g,f.toString(),l,a),a}try{e=await k.clone().text()}catch{e=void 0}let m=`HTTP ${k.status} ${k.statusText}`;if(e?.trim()){let a=e.trim();if(!a.includes("<!DOCTYPE html>")){if(a.startsWith("{")||a.startsWith("["))try{let b=JSON.parse(a);if(b.error&&"object"==typeof b.error&&null!==b.error){let a=b.error,c=a.code??"",d=a.message??a.msg??"";c&&(m+=` [${c}]`),d&&(m+=` - ${d}`);let e=a.data;e&&"string"==typeof e&&e.trim()&&(m+=` (${e})`)}}catch{}else if(!a.includes("<!DOCTYPE html>")){let b=a.split(`
`)[0].trim();if(b.includes(": ")){let[a,c]=b.split(": ",2);a&&c?m+=` - ${a}: ${c}`:m+=` - ${b}`}else b.includes(" - "),m+=` - ${b}`}}}throw Error(m,{cause:k})}catch(c){if(f){let b=f.toString();throw al(g,b,a,c),c instanceof TypeError?new x("HttpClient.http()",c.message,{method:a,url:b,networkErrorType:"TypeError"},c):new v("HttpClient.http()",c.message,{method:a,url:b},c)}{let d=this.isValidUrl(this.baseURL)?new URL(b,this.baseURL).toString():b;throw new w("HttpClient.http()",c.message,{method:a,url:d},c)}}finally{clearTimeout(e)}}async post(a,b){return await this.http("POST",a,b)}},an={transactionBodyToTransactionRequestInput:function(a,b){if(void 0!==a.nonce&&("string"==typeof a.nonce?parseInt(a.nonce,10):a.nonce)<0)throw Error("Transaction nonce must be a positive number");return{from:b,chainTag:a.chainTag,blockRef:a.blockRef,expiration:a.expiration,clauses:a.clauses,gasPriceCoef:a.gasPriceCoef,gas:a.gas,dependsOn:a.dependsOn??void 0,nonce:a.nonce,reserved:a.reserved,maxPriorityFeePerGas:a.maxPriorityFeePerGas??void 0,maxFeePerGas:a.maxFeePerGas??void 0}}},ao=(a=>(a.eth_blockNumber="eth_blockNumber",a.eth_chainId="eth_chainId",a.eth_getBalance="eth_getBalance",a.eth_getCode="eth_getCode",a.eth_getStorageAt="eth_getStorageAt",a.eth_estimateGas="eth_estimateGas",a.eth_call="eth_call",a.eth_sendRawTransaction="eth_sendRawTransaction",a.eth_getLogs="eth_getLogs",a.eth_getBlockByHash="eth_getBlockByHash",a.eth_getBlockByNumber="eth_getBlockByNumber",a.eth_accounts="eth_accounts",a.eth_requestAccounts="eth_requestAccounts",a.eth_gasPrice="eth_gasPrice",a.eth_getTransactionByHash="eth_getTransactionByHash",a.eth_getTransactionCount="eth_getTransactionCount",a.eth_getTransactionReceipt="eth_getTransactionReceipt",a.eth_getTransactionByBlockNumberAndIndex="eth_getTransactionByBlockNumberAndIndex",a.eth_getTransactionByBlockHashAndIndex="eth_getTransactionByBlockHashAndIndex",a.eth_getBlockTransactionCountByHash="eth_getBlockTransactionCountByHash",a.eth_getBlockTransactionCountByNumber="eth_getBlockTransactionCountByNumber",a.eth_sendTransaction="eth_sendTransaction",a.eth_syncing="eth_syncing",a.net_version="net_version",a.web3_clientVersion="web3_clientVersion",a.eth_subscribe="eth_subscribe",a.eth_unsubscribe="eth_unsubscribe",a.debug_traceTransaction="debug_traceTransaction",a.debug_traceCall="debug_traceCall",a.evm_mine="evm_mine",a.evm_increaseTime="evm_increaseTime",a.web3_sha3="web3_sha3",a.net_peerCount="net_peerCount",a.net_listening="net_listening",a.eth_getUncleByBlockNumberAndIndex="eth_getUncleByBlockNumberAndIndex",a.eth_getUncleByBlockHashAndIndex="eth_getUncleByBlockHashAndIndex",a.txpool_inspect="txpool_inspect",a.txpool_contentFrom="txpool_contentFrom",a.txpool_content="txpool_content",a.txpool_status="txpool_status",a.eth_signTransaction="eth_signTransaction",a.debug_traceBlockByHash="debug_traceBlockByHash",a.debug_traceBlockByNumber="debug_traceBlockByNumber",a.eth_getUncleCountByBlockHash="eth_getUncleCountByBlockHash",a.eth_getUncleCountByBlockNumber="eth_getUncleCountByBlockNumber",a.eth_signTypedData_v4="eth_signTypedData_v4",a.eth_getBlockReceipts="eth_getBlockReceipts",a.eth_coinbase="eth_coinbase",a.eth_feeHistory="eth_feeHistory",a.eth_getWork="eth_getWork",a.eth_mining="eth_mining",a.eth_hashrate="eth_hashrate",a.eth_protocolVersion="eth_protocolVersion",a.eth_sign="eth_sign",a.eth_submitWork="eth_submitWork",a.parity_nextNonce="parity_nextNonce",a.eth_newFilter="eth_newFilter",a.eth_newBlockFilter="eth_newBlockFilter",a.eth_newPendingTransactionFilter="eth_newPendingTransactionFilter",a.eth_getFilterLogs="eth_getFilterLogs",a.eth_getFilterChanges="eth_getFilterChanges",a.eth_uninstallFilter="eth_uninstallFilter",a.debug_getBadBlocks="debug_getBadBlocks",a.debug_getRawBlock="debug_getRawBlock",a.debug_getRawHeader="debug_getRawHeader",a.debug_getRawReceipts="debug_getRawReceipts",a.debug_getRawTransaction="debug_getRawTransaction",a.engine_exchangeCapabilities="engine_exchangeCapabilities",a.engine_exchangeTransitionConfigurationV1="engine_exchangeTransitionConfigurationV1",a.engine_forkchoiceUpdatedV1="engine_forkchoiceUpdatedV1",a.engine_forkchoiceUpdatedV2="engine_forkchoiceUpdatedV2",a.engine_forkchoiceUpdatedV3="engine_forkchoiceUpdatedV3",a.engine_getPayloadBodiesByHashV1="engine_getPayloadBodiesByHashV1",a.engine_getPayloadBodiesByRangeV1="engine_getPayloadBodiesByRangeV1",a.engine_getPayloadV1="engine_getPayloadV1",a.engine_getPayloadV2="engine_getPayloadV2",a.engine_getPayloadV3="engine_getPayloadV3",a.engine_newPayloadV1="engine_newPayloadV1",a.engine_newPayloadV2="engine_newPayloadV2",a.engine_newPayloadV3="engine_newPayloadV3",a.eth_createAccessList="eth_createAccessList",a.eth_getProof="eth_getProof",a.eth_maxPriorityFeePerGas="eth_maxPriorityFeePerGas",a))(ao||{}),ap=class{balance;energy;hasCode;get vet(){return $.VET.of($.Units.formatEther($.FixedPointNumber.of(this.balance)))}get vtho(){return $.VTHO.of($.Units.formatEther($.FixedPointNumber.of(this.energy)))}constructor(a){this.balance=a.balance,this.energy=a.energy,this.hasCode=a.hasCode}},aq={PARAMS_ABI:[{constant:!1,inputs:[{name:"_key",type:"bytes32"},{name:"_value",type:"uint256"}],name:"set",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"_key",type:"bytes32"}],name:"get",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"executor",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{anonymous:!1,inputs:[{indexed:!0,name:"key",type:"bytes32"},{indexed:!1,name:"value",type:"uint256"}],name:"Set",type:"event"}],PARAMS_ADDRESS:"0x0000000000000000000000000000506172616d73",ENERGY_ABI:[{constant:!0,inputs:[],name:"name",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"pure",type:"function"},{constant:!1,inputs:[{name:"_spender",type:"address"},{name:"_value",type:"uint256"}],name:"approve",outputs:[{name:"success",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"totalSupply",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_amount",type:"uint256"}],name:"transferFrom",outputs:[{name:"success",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"decimals",outputs:[{name:"",type:"uint8"}],payable:!1,stateMutability:"pure",type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"}],name:"balanceOf",outputs:[{name:"balance",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"symbol",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"pure",type:"function"},{constant:!1,inputs:[{name:"_to",type:"address"},{name:"_amount",type:"uint256"}],name:"transfer",outputs:[{name:"success",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_amount",type:"uint256"}],name:"move",outputs:[{name:"success",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"totalBurned",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"},{name:"_spender",type:"address"}],name:"allowance",outputs:[{name:"remaining",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{anonymous:!1,inputs:[{indexed:!0,name:"_from",type:"address"},{indexed:!0,name:"_to",type:"address"},{indexed:!1,name:"_value",type:"uint256"}],name:"Transfer",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"_owner",type:"address"},{indexed:!0,name:"_spender",type:"address"},{indexed:!1,name:"_value",type:"uint256"}],name:"Approval",type:"event"}],ENERGY_ADDRESS:"0x0000000000000000000000000000456e65726779"},ar=/^http:\/\//,as=/^https:\/\//,at=30,au=$.Keccak256.of($.Txt.of("Error(string)").bytes).toString().slice(0,10),av=$.Keccak256.of($.Txt.of("Panic(uint256)").bytes).toString().slice(0,10),aw="https://mainnet.vechain.org",ax="https://testnet.vechain.org",ay="http://127.0.0.1:8669",az="https://ethereum.github.io/execution-apis/api-documentation/",aA=a=>{let b={};for(let c in a)void 0!==a[c]&&(b[c]=a[c]);return b};async function aB(a){await new Promise(b=>setTimeout(b,a))}var aC=class extends _.EventEmitter{currentIteration=0;error;hasToStopOnError;intervalId;pollingFunction;requestIntervalInMilliseconds;constructor(a,b,c){if(super(),this.pollingFunction=a,this.hasToStopOnError=c,void 0!==b&&(b<=0||!Number.isInteger(b)))throw new r("SyncPoll()",'Polling failed: Invalid input for field "options?.maximumWaitingTimeInMilliseconds" it must be a positive number',{requestIntervalInMilliseconds:b});this.requestIntervalInMilliseconds=b}get getCurrentIteration(){return this.currentIteration}async _intervalLoop(){try{let a=await this.pollingFunction();this.emit("data",{data:a,eventPoll:this})}catch(a){a instanceof x?(console.warn("Network error during polling, continuing:",a.message),this.emit("error",{error:a})):(this.error=new A("EventPoll - main interval loop function",`Error during the execution of the poll ${a.message}`,{functionName:this.pollingFunction.name}),this.emit("error",{error:this.error})),this.hasToStopOnError&&this.stopListen()}this.currentIteration=this.currentIteration+1}onData(a){return this.on("data",b=>{a(b.data,b.eventPoll)}),this}onError(a){return this.on("error",b=>{a(b.error)}),this}onStart(a){return this.on("start",b=>{a(b.eventPoll)}),this}onStop(a){return this.on("stop",b=>{a(b.eventPoll)}),this}startListen(){this.emit("start",{eventPoll:this}),this._intervalLoop().then(()=>{this.intervalId=setInterval(()=>{(async()=>{try{await this._intervalLoop()}catch(a){console.error("EventPoll interval error:",a),this.hasToStopOnError&&this.stopListen()}})()},this.requestIntervalInMilliseconds)})}stopListen(){clearInterval(this.intervalId),this.emit("stop",{eventPoll:this})}},aD={SyncPoll:function(a,b){if(b?.requestIntervalInMilliseconds!==void 0&&(b.requestIntervalInMilliseconds<=0||!Number.isInteger(b.requestIntervalInMilliseconds)))throw new r("SyncPoll()",'Polling failed: Invalid input for field "options?.requestIntervalInMilliseconds" it must be a positive number',{requestIntervalInMilliseconds:b.requestIntervalInMilliseconds});if(b?.maximumIterations!==void 0&&(b.maximumIterations<=0||!Number.isInteger(b.maximumIterations)))throw new r("SyncPoll()",'Polling failed: Invalid input for field "options?.maximumIterations" it must be a positive number',{maximumIterations:b.maximumIterations});if(b?.maximumWaitingTimeInMilliseconds!==void 0&&(b.maximumWaitingTimeInMilliseconds<=0||!Number.isInteger(b.maximumWaitingTimeInMilliseconds)))throw new r("SyncPoll()",'Polling failed: Invalid input for field "options?.maximumWaitingTimeInMilliseconds" it must be a positive number',{maximumWaitingTimeInMilliseconds:b.maximumWaitingTimeInMilliseconds});let c=0,d,e=!1,f=Date.now();return{waitUntil:async g=>{let h=0,i=!1;try{do{try{if(d=await a(),h=0,i=g(d))break}catch(c){if(c instanceof x){if(++h>=10)throw new A("SyncPoll.waitUntil()","Polling failed: Too many consecutive network errors.",{functionName:a.name},c);await aB(b?.requestIntervalInMilliseconds??1e3);continue}throw c}await aB(b?.requestIntervalInMilliseconds??1e3),c+=1;let j=b?.maximumIterations!==void 0?c>=b.maximumIterations:c>=1e3,k=b?.maximumWaitingTimeInMilliseconds!==void 0&&Date.now()-f>=b.maximumWaitingTimeInMilliseconds;if(e=!(i||j||k),c>=1e3)throw new A("SyncPoll.waitUntil()","Polling failed: Maximum safe iterations reached.",{functionName:a.name})}while(e)return d}catch(b){throw new A("SyncPoll.waitUntil()","Polling failed: Function execution error encountered during synchronous polling.",{functionName:a.name},b)}}}},createEventPoll:function(a,b,c=!0){return new aC(a,b,c)}},aE=a=>{let b=Object.entries(a).filter(([,a])=>void 0!==a).map(([a,b])=>`${encodeURIComponent(a)}=${encodeURIComponent(b)}`);return b.length>0?`?${b.join("&")}`:""},aF=a=>{a=a.trim();let b=/^(https?:\/\/)([a-zA-Z0-9-]+(\.[a-zA-Z0-9-]+)*)(:\d+)?\/?$/;if(!b.test(a))throw new r("sanitizeWebsocketBaseURL()",`Invalid url: ${a}. Must adhere to the regex: ${b}.`,{url:a,urlRegex:b});return a=a.replace(/\/$/,""),a=null!==ar.exec(a)?a.replace(ar,"ws://"):a.replace(as,"wss://")},aG={accounts:{get:{ACCOUNT_DETAIL:a=>`/accounts/${a}`,ACCOUNT_BYTECODE:a=>`/accounts/${a}/code`,STORAGE_AT:(a,b)=>`/accounts/${a}/storage/${b}`},post:{SIMULATE_TRANSACTION:a=>null!=a?`/accounts/*?revision=${a}`:"/accounts/*"}},blocks:{get:{BLOCK_DETAIL:a=>`/blocks/${a}`}},nodes:{get:{NODES:()=>"/node/network/peers"}},logs:{post:{EVENT_LOGS:()=>"/logs/event",TRANSFER_LOGS:()=>"/logs/transfer"}},transactions:{get:{TRANSACTION:a=>`/transactions/${a}`,TRANSACTION_RECEIPT:a=>`/transactions/${a}/receipt`},post:{TRANSACTION:()=>"/transactions"}},subscriptions:{get:{BLOCK:(a,b)=>{let c=aE({pos:b});return`${aF(a)}/subscriptions/block${c}`},EVENT:(a,b)=>{let c=aE({pos:b?.position,addr:b?.contractAddress,t0:b?.topic0,t1:b?.topic1,t2:b?.topic2,t3:b?.topic3,t4:b?.topic4});return`${aF(a)}/subscriptions/event${c}`},VET_TRANSFER:(a,b)=>{let c=aE({pos:b?.position,txOrigin:b?.signerAddress,sender:b?.sender,recipient:b?.receiver});return`${aF(a)}/subscriptions/transfer${c}`},BEAT_LEGACY:(a,b)=>{let c=aE({pos:b});return`${aF(a)}/subscriptions/beat${c}`},BEAT:(a,b)=>{let c=aE({pos:b});return`${aF(a)}/subscriptions/beat2${c}`},NEW_TRANSACTIONS:a=>`${aF(a)}/subscriptions/txpool`}},debug:{post:{TRACE_TRANSACTION_CLAUSE:()=>"/debug/tracers",TRACE_CONTRACT_CALL:()=>"/debug/tracers/call",RETRIEVE_STORAGE_RANGE:()=>"/debug/storage-range"}},fees:{get:{FEES_HISTORY:(a,b,c)=>`/fees/history${aE({blockCount:a,newestBlock:b,rewardPercentiles:c?.join(",")})}`}}},aH={getEventSubscriptionUrl:(a,b,c,d)=>{let e=new $.ABIEvent(b).encodeFilterTopicsNoNull(c??[]);return aG.subscriptions.get.EVENT(a,{position:d?.blockID,contractAddress:d?.address,topic0:e[0],topic1:e[1],topic2:e[2],topic3:e[3],topic4:e[4]})},getBlockSubscriptionUrl:(a,b)=>aG.subscriptions.get.BLOCK(a,b?.blockID),getNewTransactionsSubscriptionUrl:a=>aG.subscriptions.get.NEW_TRANSACTIONS(a),getVETtransfersSubscriptionUrl:(a,b)=>aG.subscriptions.get.VET_TRANSFER(a,{position:b?.blockID,signerAddress:b?.signerAddress,sender:b?.sender,receiver:b?.recipient}),getLegacyBeatSubscriptionUrl:(a,b)=>aG.subscriptions.get.BEAT_LEGACY(a,b?.blockID),getBeatSubscriptionUrl:(a,b)=>aG.subscriptions.get.BEAT(a,b?.blockID)},aI={[$.MAINNET_NETWORK.genesisBlock.id]:{registry:"0xa9231da8BF8D10e2df3f6E03Dd5449caD600129b",resolveUtils:"0xA11413086e163e41901bb81fdc5617c975Fa5a1A"},[$.TESTNET_NETWORK.genesisBlock.id]:{registry:"0xcBFB30c1F267914816668d53AcBA7bA7c9806D13",resolveUtils:"0xc403b8EA53F707d7d4de095f0A20bC491Cf2bc94"},[$.SOLO_NETWORK.genesisBlock.id]:{registry:"0x1c4a602ed21f3d1dddd1142c81f231ef1a08c921",resolveUtils:"0xb2f08bbfa8a42b1fbe63feec604cb147385203d7"}},aJ={resolveName:async(a,b)=>{let[c]=await aJ.resolveNames(a.blocks,a.transactions,[b]);return c??null},resolveNames:async(a,b,c)=>{let d=await a.getGenesisBlock();if(null===d||!$.Address.isValid(aI[d.id]?.resolveUtils))return c.map(()=>null);let e=aI[d.id].resolveUtils,[f]=(await b.executeCall(e,$.ABIItem.ofSignature($.ABIFunction,"function getAddresses(string[] names) returns (address[] addresses)"),[c])).result.array;return f.map(a=>a!==$.ZERO_ADDRESS&&$.Address.isValid(a)?a:null)},lookupAddress:async(a,b)=>{let[c]=await aJ.lookupAddresses(a,[b]);return c??null},lookupAddresses:async(a,b)=>{let c=await a.blocks.getGenesisBlock();if(null===c||!$.Address.isValid(aI[c.id]?.resolveUtils))return b.map(()=>null);let d=aI[c.id].resolveUtils,[e]=(await a.contracts.executeCall(d,$.ABIItem.ofSignature($.ABIFunction,"function getNames(address[] addresses) returns (string[] names)"),[b])).result.array;return e.map(a=>""===a?null:a)}},aK=class{constructor(a){this.httpClient=a}async getAccount(a,b){let c=b?.revision?.toString();return new ap(await this.httpClient.get(aG.accounts.get.ACCOUNT_DETAIL(a.toString()),{query:aA({revision:c})}))}async getBytecode(a,b){let c=b?.revision?.toString(),d=await this.httpClient.get(aG.accounts.get.ACCOUNT_BYTECODE(a.toString()),{query:aA({revision:c})});return $.HexUInt.of(d.code)}async getStorageAt(a,b,c){let d=b.toString(),e=c?.revision?.toString(),f=await this.httpClient.get(aG.accounts.get.STORAGE_AT(a.toString(),d),{query:aA({pos:d,revision:e})});return $.HexUInt.of(f.value)}},aL=class{constructor(a,b){this.httpClient=a,this.onBlockError=b?.onBlockError,b?.isPollingEnabled===!0&&this.setupPolling()}headBlock=null;onBlockError;pollInstance;destroy(){null!=this.pollInstance&&this.pollInstance.stopListen()}setupPolling(){this.pollInstance=aD.createEventPoll(async()=>await this.getBestBlockCompressed(),1e4).onData(a=>{this.headBlock=a}).onError(this.onBlockError??(()=>{})),this.pollInstance.startListen()}async getBlockCompressed(a){if(null!=a&&!$.Revision.isValid(a))throw new r("BlocksModule.getBlockCompressed()",'Invalid revision. The revision must be a string representing a block number or block id (also "best" is accepted which represents the best block & "finalized" for the finalized block).',{revision:a});return await this.httpClient.http("GET",aG.blocks.get.BLOCK_DETAIL(a))}async getBlockExpanded(a){if(null!=a&&!$.Revision.isValid(a))throw new r("BlocksModule.getBlockExpanded()",'Invalid revision. The revision must be a string representing a block number or block id (also "best" is accepted which represents the best block & "finalized" for the finalized block).',{revision:a});return await this.httpClient.http("GET",aG.blocks.get.BLOCK_DETAIL(a),{query:aA({expanded:!0})})}async getBestBlockCompressed(){return await this.getBlockCompressed("best")}async getBestBlockExpanded(){return await this.getBlockExpanded("best")}async getBestBlockBaseFeePerGas(){let a=await this.getBestBlockCompressed();return null===a?null:a.baseFeePerGas??null}async getBestBlockRef(){let a=await this.getBestBlockCompressed();return null===a?null:a.id.slice(0,18)}async getFinalBlockCompressed(){return await this.getBlockCompressed("finalized")}async getFinalBlockExpanded(){return await this.getBlockExpanded("finalized")}async _waitForBlock(a,b,c){if(null!=a&&a<=0)throw new r("BlocksModule.waitForBlock()","Invalid blockNumber. The blockNumber must be a number representing a block number.",{blockNumber:a});return await aD.SyncPoll(async()=>b?await this.getBlockExpanded(a):await this.getBlockCompressed(a),{requestIntervalInMilliseconds:c?.intervalMs,maximumWaitingTimeInMilliseconds:c?.timeoutMs}).waitUntil(b=>null!=b&&b.number==a)}async waitForBlockCompressed(a,b){return await this._waitForBlock(a,!1,b)}async waitForBlockExpanded(a,b){return await this._waitForBlock(a,!0,b)}getHeadBlock(){return this.headBlock}async getGenesisBlock(){return await this.getBlockCompressed(0)}getAllAddressesIntoABlock(a){let b=new Set;return b.add(a.beneficiary),b.add(a.signer),a.transactions.forEach(a=>{a.clauses.forEach(a=>{"string"==typeof a.to&&b.add(a.to)}),b.add(a.gasPayer),b.add(a.origin),a.outputs.forEach(a=>{"string"==typeof a.contractAddress&&b.add(a.contractAddress),a.events.forEach(a=>{b.add(a.address)}),a.transfers.forEach(a=>{b.add(a.recipient),b.add(a.sender)})})}),Array.from(b)}},aM=class{contract;criteriaSet;constructor(a,b){this.contract=a,this.criteriaSet=b}async get(a){let b={range:a?.range??{unit:"block",from:0,to:(await this.contract.contractsModule.transactionsModule.blocksModule.getBestBlockCompressed())?.number},criteriaSet:this.criteriaSet,options:a?.options,order:a?.order??"asc"};return await this.contract.contractsModule.transactionsModule.logsModule.filterEventLogs(b)}};function aN(a,b,c){let d=a.getEventAbi(b),e=new Map(d.encodeFilterTopicsNoNull(c).map((a,b)=>[b,a]));return{criteria:{address:a.address,topic0:e.get(0),topic1:e.has(1)?e.get(1):void 0,topic2:e.has(2)?e.get(2):void 0,topic3:e.has(3)?e.get(3):void 0,topic4:e.has(4)?e.get(4):void 0},eventAbi:d}}function aO(a){let b=function(a){let b=a.find(a=>aP(a));if(b)return{value:b.value.toString()}}(a),c=a.find(a=>aQ(a)),d=a.find(a=>aR(a));return(void 0!==b||void 0!==c||void 0!==d)&&(a=a.filter(a=>!(aP(a)||aQ(a)||aR(a)))),{args:a,clauseAdditionalOptions:{value:b?.value,comment:c?.comment,revision:d?.revision}}}function aP(a){return void 0!==a.value}function aQ(a){return void 0!==a.comment}function aR(a){return void 0!==a.revision}var aS=class{contractsModule;address;abi;signer;deployTransactionReceipt;read={};transact={};filters={};clause={};criteria={};contractCallOptions={};contractTransactionOptions={};constructor(a,b,c,d,e){this.abi=b,this.address=a,this.contractsModule=c,this.deployTransactionReceipt=e,this.signer=d,this.read=function(a){return new Proxy(a.read,{get:(b,c)=>async(...b)=>{let d=aO(b),e=d.clauseAdditionalOptions?.comment,f=d.clauseAdditionalOptions?.revision,g=a.getFunctionAbi(c),h=await a.contractsModule.executeCall(a.address,g,d.args,{caller:void 0!==a.getSigner()?await a.getSigner()?.getAddress():void 0,...a.getContractReadOptions(),comment:e,revision:f,includeABI:!0});if(!h.success)throw new q(g.stringSignature,h.result.errorMessage,{contractAddress:a.address});return h.result.array??[]}})}(this),this.transact=function(a){return new Proxy(a.transact,{get:(b,c)=>async(...b)=>{if(void 0===a.getSigner())throw new V("getTransactProxy()","Caller signer is required to transact with the contract.",{fieldName:"signer",prop:c});let d=a.getContractTransactOptions(),e=aO(b),f=e.clauseAdditionalOptions?.value,g=e.clauseAdditionalOptions?.comment;return b=e.args,await a.contractsModule.executeTransaction(a.getSigner(),a.address,a.getFunctionAbi(c),b,{...d,value:d.value??f??"0x0",comment:g,includeABI:!0})}})}(this),this.filters=function(a){return new Proxy(a.filters,{get:(b,c)=>b=>{let d=aN(a,c,b);return new aM(a,[d])}})}(this),this.clause=function(a){return new Proxy(a.clause,{get:(b,c)=>(...b)=>{let d=a.getContractTransactOptions(),e=aO(b),f=e.clauseAdditionalOptions?.value,g=e.clauseAdditionalOptions?.comment;return b=e.args,{clause:$.Clause.callFunction($.Address.of(a.address),a.getFunctionAbi(c),b,$.VET.of(d.value??f??0,$.Units.wei),{comment:g,includeABI:!0}),functionAbi:a.getFunctionAbi(c)}}})}(this),this.criteria=function(a){return new Proxy(a.criteria,{get:(b,c)=>b=>aN(a,c,b)})}(this)}setContractReadOptions(a){return this.contractCallOptions=a,this.contractCallOptions}getContractReadOptions(){return this.contractCallOptions}clearContractReadOptions(){this.contractCallOptions={}}setContractTransactOptions(a){return this.contractTransactionOptions=a,this.contractTransactionOptions}getContractTransactOptions(){return this.contractTransactionOptions}clearContractTransactOptions(){this.contractTransactionOptions={}}setSigner(a){return this.signer=a,this.signer}getSigner(){return this.signer}getFunctionAbi(a){return $.ABIContract.ofAbi(this.abi).getFunction(a.toString())}getEventAbi(a){return $.ABIContract.ofAbi(this.abi).getEvent(a.toString())}},aT=class{abi;bytecode;signer;deployTransaction;contractsModule;constructor(a,b,c,d){this.abi=a,this.bytecode=b,this.signer=c,this.contractsModule=d}async startDeployment(a,b){let c=$.Clause.deployContract($.HexUInt.of(this.bytecode),a),d=await this.contractsModule.transactionsModule.estimateGas([c],await this.signer.getAddress(),b),e=await this.contractsModule.transactionsModule.buildTransactionBody([c],d.totalGas,b),f=await this.signer.signTransaction(an.transactionBodyToTransactionRequestInput(e,await this.signer.getAddress()));return this.deployTransaction=await this.contractsModule.transactionsModule.sendTransaction($.Transaction.decode($.HexUInt.of(f.slice(2)).bytes,!0)),this}async waitForDeployment(){if(this.deployTransaction?.id===void 0)throw new X("ContractFactory.waitForDeployment()","Cannot find a contract deployment transaction",{networkUrl:this.contractsModule.transactionsModule.blocksModule.httpClient.baseURL});let a=await this.deployTransaction.wait();if(a?.outputs[0]?.contractAddress===null||a?.outputs[0]?.contractAddress===void 0)throw new p("ContractFactory.waitForDeployment()","Contract deployment failed.",{deployTransaction:this.deployTransaction});return new aS(a?.outputs[0].contractAddress,this.abi,this.contractsModule,this.signer,a)}getDeployTransaction(){return this.deployTransaction}},aU=class{constructor(a){this.transactionsModule=a}createContractFactory(a,b,c){return new aT(a,b,c,this)}load(a,b,c){return new aS(a,b,this,c)}async executeCall(a,b,c,d){return await this.transactionsModule.executeCall(a,b,c,d)}async executeMultipleClausesCall(a,b){return a.every(a=>"clause"in a),await this.transactionsModule.executeMultipleClausesCall(a,b)}async executeTransaction(a,b,c,d,e){return await this.transactionsModule.executeTransaction(a,b,c,d,e)}async executeMultipleClausesTransaction(a,b,c){return await this.transactionsModule.executeMultipleClausesTransaction(a,b,c)}async getLegacyBaseGasPrice(){return await this.transactionsModule.getLegacyBaseGasPrice()}},aV=class{constructor(a){this.httpClient=a}async retrieveStorageRange(a){this.validateTarget(a.target,"retrieveStorageRange");let b=`${a.target.blockId}/${a.target.transaction}/${a.target.clauseIndex}`;return await this.httpClient.post(aG.debug.post.RETRIEVE_STORAGE_RANGE(),{query:{},body:{target:b,address:a.options?.address?.toString(),keyStart:a.options?.keyStart?.toString(),maxResult:a.options?.maxResult},headers:{}})}async traceContractCall(a,b){return await this.httpClient.post(aG.debug.post.TRACE_CONTRACT_CALL(),{query:{},body:{to:a.target?.to?.toString(),data:a.target?.data?.toString(),value:"bigint"==typeof a.target?.value?.wei?$.HexUInt.of(a.target.value.wei).toString():void 0,name:b,gas:a.options?.gas,gasPrice:a.options?.gasPrice,caller:a.options?.caller,provedWork:a.options?.provedWork,gasPayer:a.options?.gasPayer,expiration:a.options?.expiration,blockRef:a.options?.blockRef,config:a.config},headers:{}})}async traceTransactionClause(a,b){this.validateTarget(a.target,"traceTransactionClause");let c=`${a.target.blockId}/${a.target.transaction}/${a.target.clauseIndex}`;return await this.httpClient.post(aG.debug.post.TRACE_TRANSACTION_CLAUSE(),{query:{},body:{target:c,name:b,config:a.config},headers:{}})}validateTarget(a,b){if("number"==typeof a.transaction&&a.transaction<0)throw new r("DebugModule.validateTarget()",`invalid transaction index '${a.transaction}' given as input for ${b}.`,{transaction:a.transaction,functionName:b});if(a.clauseIndex<0)throw new r("DebugModule.validateTarget()",`invalid clause index '${a.clauseIndex}' given as input for ${b}.`,{clauseIndex:a.clauseIndex,functionName:b})}},aW=class{httpClient;transactionsModule;constructor(a){this.httpClient=a,this.transactionsModule=null}setTransactionsModule(a){this.transactionsModule=a}async estimateGas(a,b,c){if(null==this.transactionsModule)throw new r("estimateGas()","Transactions module not set",{});return await this.transactionsModule.estimateGas(a,b,c)}async getMaxPriorityFeePerGas(){let a=await this.httpClient.get("/fees/priority");if(null==a||"object"!=typeof a)throw new r("getMaxPriorityFeePerGas()","Invalid response format from /fees/priority endpoint",{response:a});if(void 0===a.maxPriorityFeePerGas||null===a.maxPriorityFeePerGas||""===a.maxPriorityFeePerGas||"string"!=typeof a.maxPriorityFeePerGas)throw new r("getMaxPriorityFeePerGas()","Missing or invalid maxPriorityFeePerGas in response",{response:a});return a.maxPriorityFeePerGas}async getFeeHistory(a){if(null==a||"number"!=typeof a.blockCount||!Number.isFinite(a.blockCount)||a.blockCount<=0)throw new r("getFeeHistory()","Invalid blockCount parameter",{options:a});if(null!==a.newestBlock&&void 0!==a.newestBlock&&!$.Revision.isValid(a.newestBlock))throw new r("getFeeHistory()",'Invalid revision. The revision must be a string representing a block number or block id (also "best" is accepted which represents the best block & "finalized" for the finalized block).',{options:a});let b=await this.httpClient.http("GET",aG.fees.get.FEES_HISTORY(a.blockCount,a.newestBlock,a.rewardPercentiles));if(null==b||"object"!=typeof b)throw new r("getFeeHistory()","Invalid response format from /fees/history endpoint",{response:b});return b}async getNextBlockBaseFeePerGas(){let a=await this.getFeeHistory({blockCount:1,newestBlock:"next"});return null===a.baseFeePerGas||void 0===a.baseFeePerGas||0===a.baseFeePerGas.length?null:$.HexUInt.of(a.baseFeePerGas[0]).bi}},aX=class{blocksModule;constructor(a){this.blocksModule=a}async filterRawEventLogs(a){return await this.blocksModule.httpClient.http("POST",aG.logs.post.EVENT_LOGS(),{query:{},body:a,headers:{}})}async filterEventLogs(a){let b=a.criteriaSet?.map(a=>a.eventAbi),c=await this.getRawEventLogs(a),d=[];if(void 0!==b){let a=this.removeDuplicatedAbis(b);c.forEach(b=>{let c=a.get(b.topics[0]);if(null==c)throw new j("LogsModule.filterEventLogs","Topic not found in the provided ABIs.",{type:"event",value:b.topics[0]});b.decodedData=c.decodeEventLogAsArray({data:$.Hex.of(b.data),topics:b.topics.map(a=>$.Hex.of(a))}),d.push(b)})}return d}async filterGroupedEventLogs(a){let b=a.criteriaSet?.map(a=>a.eventAbi),c=await this.getRawEventLogs(a),d=new Map;if(void 0!==b){let a=this.removeDuplicatedAbis(b);a.forEach(a=>d.set(a.signatureHash,[])),c.forEach(b=>{let c=a.get(b.topics[0]);if(null==c)throw new j("LogsModule.filterGroupedEventLogs","Topic not found in the provided ABIs.",{type:"event",value:b.topics[0]});b.decodedData=c.decodeEventLogAsArray({data:$.Hex.of(b.data),topics:b.topics.map(a=>$.Hex.of(a))}),d.get(b.topics[0])?.push(b)})}return Array.from(d.values())}async getRawEventLogs(a){let b=a.criteriaSet?.map(a=>a.criteria),c={range:a.range??{unit:"block",from:0,to:(await this.blocksModule.getBestBlockCompressed())?.number},criteriaSet:b,options:a.options,order:a.order??"asc"};return await this.filterRawEventLogs(c)}removeDuplicatedAbis(a){let b=new Map;return a.forEach(a=>{b.has(a.signatureHash)||b.set(a.signatureHash,a)}),b}async filterTransferLogs(a){return await this.blocksModule.httpClient.http("POST",aG.logs.post.TRANSFER_LOGS(),{query:{},body:a,headers:{}})}},aY=new WeakMap,aZ=class{blocksModule;constructor(a){this.blocksModule=a}async getNodes(){return await this.blocksModule.httpClient.http("GET",aG.nodes.get.NODES())??[]}async isHealthy(){let a=await this.blocksModule.getBestBlockCompressed(),b=this.getTimestampFromBlock(a);return 30>Math.abs(Math.floor(Date.now()/1e3)-b)}getTimestampFromBlock=a=>{if(null==a||"object"!=typeof a||!("timestamp"in a)||"number"!=typeof a.timestamp)throw new r("NodesModule.getTimestampFromBlock()","Sending failed: Input must be a valid raw transaction in hex format.",{response:a});return a?.timestamp};async getChaintag(){let a=aY.get(this.blocksModule);if(void 0!==a)return a;let b=await this.blocksModule.getGenesisBlock();if(!b?.id)throw new r("NodesModule.getChaintag()","The genesis block id is null or undefined. Unable to get the chain tag.",{url:this.blocksModule.httpClient.baseURL});let c=+`0x${b.id.slice(-2)}`;if(Number.isNaN(c))throw new r("NodesModule.getChaintag()","Invalid genesis block id. Unable to derive chain tag.",{id:b.id});return aY.set(this.blocksModule,c),c}},a$=$.Keccak256.of($.Txt.of("Error(string)").bytes).toString().slice(0,10),a_=$.Keccak256.of($.Txt.of("Panic(uint256)").bytes).toString().slice(0,10);function a0(a){if(a.startsWith(a$))return $.ABI.ofEncoded("string","0x"+a.slice(a$.length)).getFirstDecodedValue();if(a.startsWith(a_)){let b=$.ABI.ofEncoded("uint256","0x"+a.slice(a_.length)).getFirstDecodedValue();return`Panic(0x${parseInt(b).toString(16).padStart(2,"0")})`}}var a1=class{blocksModule;debugModule;logsModule;gasModule;forkDetector;constructor(a,b,c,d,e){this.blocksModule=a,this.debugModule=b,this.logsModule=c,this.gasModule=d,this.forkDetector=e}async getTransaction(a,b){if(!$.ThorId.isValid(a))throw new r("TransactionsModule.getTransaction()","Invalid transaction ID given as input. Input must be an hex string of length 64.",{id:a});if(b?.head!==void 0&&!$.ThorId.isValid(b.head))throw new r("TransactionsModule.getTransaction()","Invalid head given as input. Input must be an hex string of length 64.",{head:b?.head});return await this.blocksModule.httpClient.http("GET",aG.transactions.get.TRANSACTION(a),{query:aA({raw:!1,head:b?.head,pending:b?.pending})})}async getTransactionRaw(a,b){if(!$.ThorId.isValid(a))throw new r("TransactionsModule.getTransactionRaw()","Invalid transaction ID given as input. Input must be an hex string of length 64.",{id:a});if(b?.head!==void 0&&!$.ThorId.isValid(b.head))throw new r("TransactionsModule.getTransaction()","Invalid head given as input. Input must be an hex string of length 64.",{head:b?.head});return await this.blocksModule.httpClient.http("GET",aG.transactions.get.TRANSACTION(a),{query:aA({raw:!0,head:b?.head,pending:b?.pending})})}async getTransactionReceipt(a,b){if(!$.ThorId.isValid(a))throw new r("TransactionsModule.getTransactionReceipt()","Invalid transaction ID given as input. Input must be an hex string of length 64.",{id:a});if(b?.head!==void 0&&!$.ThorId.isValid(b.head))throw new r("TransactionsModule.getTransaction()","Invalid head given as input. Input must be an hex string of length 64.",{head:b?.head});try{return await this.blocksModule.httpClient.http("GET",aG.transactions.get.TRANSACTION_RECEIPT(a),{query:aA({head:b?.head})})}catch(a){if(a instanceof x)return null;throw a}}async sendRawTransaction(a){if(!$.Hex.isValid0x(a))throw new r("TransactionsModule.sendRawTransaction()","Sending failed: Input must be a valid raw transaction in hex format.",{raw:a});try{$.Transaction.decode($.HexUInt.of(a.slice(2)).bytes,!0)}catch(b){throw new r("TransactionsModule.sendRawTransaction()","Sending failed: Input must be a valid raw transaction in hex format. Decoding error encountered.",{raw:a},b)}let b=await this.blocksModule.httpClient.http("POST",aG.transactions.post.TRANSACTION(),{body:{raw:a}});return{id:b.id,wait:async()=>await this.waitForTransaction(b.id)}}async sendTransaction(a){if(!a.isSigned)throw new r("TransactionsModule.sendTransaction()","Invalid transaction given as input. Transaction must be signed.",{signedTx:a});let b=$.Hex.of(a.encoded).toString();return await this.sendRawTransaction(b)}async waitForTransaction(a,b){if(!$.ThorId.isValid(a))throw new r("TransactionsModule.waitForTransaction()","Invalid transaction ID given as input. Input must be an hex string of length 64.",{txID:a});if(b?.timeoutMs===void 0)return await aD.SyncPoll(async()=>await this.getTransactionReceipt(a),{requestIntervalInMilliseconds:b?.intervalMs,maximumWaitingTimeInMilliseconds:b?.timeoutMs}).waitUntil(a=>null!==a);let c=Date.now()+b.timeoutMs,d=b?.intervalMs??1e3;for(;;){if(Date.now()>=c)return null;let b=await this.getTransactionReceipt(a).catch(()=>null);if(null!==b)return b;await new Promise(a=>setTimeout(a,d))}}async buildTransactionBody(a,b,c){let d=await this.blocksModule.getBlockCompressed(0);if(null===d)throw new V("TransactionsModule.buildTransactionBody()","Error while building transaction body: Cannot get genesis block.",{fieldName:"genesisBlock",genesisBlock:d,clauses:a,options:c});let e=c?.blockRef??await this.blocksModule.getBestBlockRef();if(null===e)throw new V("TransactionsModule.buildTransactionBody()","Error while building transaction body: Cannot get blockRef.",{fieldName:"blockRef",blockRef:e,clauses:a,options:c});let f=c?.chainTag??+`0x${d.id.slice(-2)}`,g=await this.fillDefaultBodyOptions(c),h;return h=Array.isArray(a)?a.map(a=>({to:a.to,data:a.data,value:a.value})):[{to:a.to,data:a.data,value:a.value}],{blockRef:e,chainTag:f,clauses:await this.resolveNamesInClauses(h),dependsOn:c?.dependsOn??null,expiration:c?.expiration??32,gas:c?.gas!==void 0?Number(c.gas):b,gasPriceCoef:g?.gasPriceCoef,maxFeePerGas:g?.maxFeePerGas,maxPriorityFeePerGas:g?.maxPriorityFeePerGas,nonce:c?.nonce??$.Hex.random(8).toString(),reserved:c?.isDelegated===!0?{features:1}:void 0}}async fillTransactionBody(a){let b={maxFeePerGas:a.maxFeePerGas,maxPriorityFeePerGas:a.maxPriorityFeePerGas,gasPriceCoef:a.gasPriceCoef},c=await this.fillDefaultBodyOptions(b);return{...a,...c}}async fillDefaultBodyOptions(a){let b=void 0!==(a??={}).maxFeePerGas,c=void 0!==a.maxPriorityFeePerGas,d=void 0!==a.gasPriceCoef;if(c&&d&&!b)throw new r("TransactionsModule.fillDefaultBodyOptions()","Invalid parameter combination: maxPriorityFeePerGas and gasPriceCoef cannot be used together without maxFeePerGas.",{options:a});if(b&&d&&!c)throw new r("TransactionsModule.fillDefaultBodyOptions()","Invalid parameter combination: maxFeePerGas and gasPriceCoef cannot be used together without maxPriorityFeePerGas.",{options:a});if(c&&b&&d)a.gasPriceCoef=void 0;else if(c&&b)a.gasPriceCoef=void 0;else if(d&&!c&&!b)return a.maxFeePerGas=void 0,a.maxPriorityFeePerGas=void 0,a;let e=await this.forkDetector.isGalacticaForked("best");if(!e&&(b||c))throw new r("TransactionsModule.fillDefaultBodyOptions()","Invalid transaction body options. Dynamic fee tx is not allowed before Galactica fork.",{options:a});if(!e&&!d)return a.gasPriceCoef=0,a;if(e&&b&&c)return a;a.gasPriceCoef=void 0;let f=await this.gasModule.getNextBlockBaseFeePerGas();if(null==f)throw new r("TransactionsModule.fillDefaultBodyOptions()","Invalid transaction body options. Unable to get next block base fee per gas.",{options:a});if(void 0===a.maxPriorityFeePerGas||null===a.maxPriorityFeePerGas){let b=await this.calculateDefaultMaxPriorityFeePerGas(f);a.maxPriorityFeePerGas=b}if(void 0===a.maxFeePerGas||null===a.maxFeePerGas){let b=$.HexUInt.of(a.maxPriorityFeePerGas).bi;a.maxFeePerGas=$.HexUInt.of(112n*f/100n+b).toString()}return a}async calculateDefaultMaxPriorityFeePerGas(a){let b=await this.gasModule.getFeeHistory({blockCount:10,newestBlock:"best",rewardPercentiles:[25,50,75]}),c;if(null!==b.reward&&void 0!==b.reward&&b.reward.length>0){let a=b.reward[b.reward.length-1];if(3===new Set(a).size)c=$.HexUInt.of(a[2]).bi;else{let a=0n,d=0;for(let c of b.reward)null!==c.length&&c.length>2&&null!==c[2]&&void 0!==c[2]&&(a+=$.HexUInt.of(c[2]).bi,d++);c=d>0?a/BigInt(d):0n}}else c=$.HexUInt.of(await this.gasModule.getMaxPriorityFeePerGas()).bi;let d=46n*a/1000n,e=d<c?d:c;return $.HexUInt.of(e).toString()}async resolveNamesInClauses(a){let b=a.reduce((a,b)=>("string"==typeof b.to&&!a.has(b.to)&&b.to.includes(".")&&a.set(b.to,b.to),a),new Map),c=[...b.keys()];return 0===b.size?a:((await aJ.resolveNames(this.blocksModule,this,c)).forEach((a,d)=>{null!==a&&b.set(c[d],a)}),a.map(a=>"string"!=typeof a.to?a:{to:b.get(a.to)??a.to,data:a.data,value:a.value}))}async simulateTransaction(a,b){let{revision:c,caller:d,gasPrice:e,gasPayer:f,gas:g,blockRef:h,expiration:i,provedWork:j}=b??{};if(null!=c&&!$.Revision.isValid(c.toString()))throw new r("TransactionsModule.simulateTransaction()","Invalid revision given as input. Input must be a valid revision (i.e., a block number or block ID).",{revision:c});return await this.blocksModule.httpClient.http("POST",aG.accounts.post.SIMULATE_TRANSACTION(c?.toString()),{query:aA({revision:c?.toString()}),body:{clauses:await this.resolveNamesInClauses(a.map(a=>({to:a.to,data:a.data,value:BigInt(a.value).toString()}))),gas:g,gasPrice:e,caller:d,provedWork:j,gasPayer:f,expiration:i,blockRef:h}})}decodeRevertReason(a,b){if(a.startsWith(au))return $.ABI.ofEncoded("string",`0x${a.slice(au.length)}`).getFirstDecodedValue();if(a.startsWith(av)){let b=$.ABI.ofEncoded("uint256",`0x${a.slice(av.length)}`).getFirstDecodedValue();return`Panic(0x${parseInt(b).toString(16).padStart(2,"0")})`}return void 0!==b?new aa.Interface([ab.ErrorFragment.from(b)]).decodeErrorResult(ab.ErrorFragment.from(b),a).toArray()[0]:""}async getRevertReason(a,b){let c=this.blocksModule,d=this.debugModule,e=await this.getTransaction(a),f=null!==e?await c.getBlockExpanded(e.meta.blockID):null;if(null===f||null===e)return null;let g=bk(bp.formatToRPCStandard(f,""),a);for(let a=0;a<e.clauses.length;a++){let c=await d.traceTransactionClause({target:{blockId:$.ThorId.of(f.id),transaction:g,clauseIndex:a},config:{OnlyTopCall:!0}},"call");if(void 0!==c.output)return this.decodeRevertReason(c.output,b)}return null}async estimateGas(a,b,c){let d=a.map(a=>{if(void 0===a)throw new r("TransactionsModule.estimateGas()","Invalid ContractClause provided: missing inner clause.",{clause:a});return"clause"in a?a.clause:a});if(0===d.length)throw new r("TransactionsModule.estimateGas()","Invalid clauses. Clauses must be an array with at least one clause.",{clauses:a,caller:b,options:c});if(c?.gasPadding!==void 0&&(c.gasPadding<=0||c.gasPadding>1))throw new r("GasModule.estimateGas()","Invalid gasPadding. gasPadding must be a number between (0, 1].",{gasPadding:c?.gasPadding});let e=await this.simulateTransaction(d,{caller:b,...c}),f=e.some(a=>a.reverted),g=Number($.Transaction.intrinsicGas(d).wei),h=e.reduce((a,b)=>a+b.gasUsed,0),i=Math.ceil((g+(0!==h?h+15e3:0))*(1+(c?.gasPadding??0)));return f?{totalGas:i,reverted:!0,revertReasons:e.map(a=>a0(a.data)??""),vmErrors:e.map(a=>a.vmError)}:{totalGas:i,reverted:!1,revertReasons:[],vmErrors:[]}}async executeCall(a,b,c,d){let e=await this.simulateTransaction([{to:a,value:"0",data:b.encodeData(c).toString()}],d);return this.getContractCallResult(e[0].data,b,e[0].reverted)}async executeMultipleClausesCall(a,b){return(await this.simulateTransaction(a.map(a=>{if(void 0===a.clause)throw new r("TransactionsModule.executeMultipleClausesCall()","Invalid ContractClause provided: missing inner clause.",{clause:a});return a.clause}),b)).map((b,c)=>this.getContractCallResult(b.data,a[c].functionAbi,b.reverted))}async executeTransaction(a,b,c,d,e){let f=await a.sendTransaction({clauses:[$.Clause.callFunction($.Address.of(b),c,d,$.VET.of(e?.value??0,$.Units.wei))],gas:e?.gas,gasLimit:e?.gasLimit,gasPrice:e?.gasPrice,gasPriceCoef:e?.gasPriceCoef,maxFeePerGas:e?.maxFeePerGas,maxPriorityFeePerGas:e?.maxPriorityFeePerGas,nonce:e?.nonce,value:e?.value,dependsOn:e?.dependsOn,expiration:e?.expiration,chainTag:e?.chainTag,blockRef:e?.blockRef,delegationUrl:e?.delegationUrl,comment:e?.comment});return{id:f,wait:async()=>await this.waitForTransaction(f)}}async executeMultipleClausesTransaction(a,b,c){let d=await b.sendTransaction({clauses:a.map(a=>{if(void 0===a)throw new r("TransactionsModule.executeMultipleClausesTransaction()","Invalid ContractClause[] | TransactionClause[] provided: missing clause.",{clause:a});return"clause"in a?a.clause:a}),gas:c?.gas,gasLimit:c?.gasLimit,gasPrice:c?.gasPrice,gasPriceCoef:c?.gasPriceCoef,maxFeePerGas:c?.maxFeePerGas,maxPriorityFeePerGas:c?.maxPriorityFeePerGas,nonce:c?.nonce,value:c?.value,dependsOn:c?.dependsOn,expiration:c?.expiration,chainTag:c?.chainTag,blockRef:c?.blockRef,delegationUrl:c?.delegationUrl,comment:c?.comment});return{id:d,wait:async()=>await this.waitForTransaction(d)}}async getLegacyBaseGasPrice(){return await this.executeCall(aq.PARAMS_ADDRESS,$.ABIContract.ofAbi(aq.PARAMS_ABI).getFunction("get"),[$.dataUtils.encodeBytes32String("base-gas-price","left")])}getContractCallResult(a,b,c){if(c)return{success:!1,result:{errorMessage:a0(a)??""}};let d=$.Hex.of(a);return{success:!0,result:{plain:b.decodeResult(d),array:b.decodeOutputAsArray(d)}}}},a2=async(a,b,c,d)=>{let e=$.Hex.of(a.encoded).toString();try{let a=await d.http("POST",b,{body:{origin:c,raw:e},headers:{"Content-Type":"application/json"}});return $.HexUInt.of(a.signature.slice(2)).bytes}catch(a){throw new W("_getDelegationSignature()","Delegation failed: Cannot get signature from gasPayerUrl.",{gasPayerUrl:b},a)}},a3=a=>{let b=null==a,c=!b&&a?.gasPayerServiceUrl!==void 0,d=!b&&a?.gasPayerPrivateKey!==void 0;return{isDelegated:()=>c||d,gasPayerOrUndefined:()=>b?void 0:a,gasPayerOrNull:()=>b?null:a,getDelegationSignatureUsingUrl:async(b,d,e)=>{if(!c)throw new W("DelegationHandler.getDelegationSignatureUsingUrl()","Delegation with url failed: gasPayerServiceUrl is not defined.",void 0);return await a2(b,a?.gasPayerServiceUrl,d,e)}}},a4=new Map,a5=!1,a6=class{constructor(a){this.httpClient=a}async isGalacticaForked(a){if(a5)return!0;if(a??="best",!$.Revision.isValid(a))throw new r("GalacticaForkDetector.isGalacticaForked()","Invalid revision. Must be a valid block number or ID.",{revision:a});let b=String(a),c=a4.get(b),d=Date.now();if(void 0!==c){if(c.result)return a5=!0,!0;if(d-c.timestamp<3e5)return!1}let e=await this.httpClient.http("GET",aG.blocks.get.BLOCK_DETAIL(a),{query:aA({expanded:!0})});if(null===e)return a4.set(b,{result:!1,timestamp:d}),!1;let f=void 0!==e.baseFeePerGas;return a4.set(b,{result:f,timestamp:d}),f&&(a5=!0),f}async detectGalactica(a="best"){return await this.isGalacticaForked(a)}clearCache(){a4.clear(),a5=!1}},a7=class a{constructor(a,b){this.httpClient=a,this.accounts=new aK(a),this.debug=new aV(a),this.blocks=new aL(a,b),this.logs=new aX(this.blocks),this.nodes=new aZ(this.blocks),this.gas=new aW(this.httpClient),this.forkDetector=new a6(this.httpClient),this.transactions=new a1(this.blocks,this.debug,this.logs,this.gas,this.forkDetector),this.gas.setTransactionsModule(this.transactions),this.contracts=new aU(this.transactions)}accounts;nodes;blocks;logs;transactions;contracts;forkDetector;gas;debug;static at(b,c){return new a(new am(b),c)}destroy(){this.blocks.destroy()}static fromUrl(b,c){return a.at(b,c)}},a8=class{MESSAGE_PREFIX=$.Txt.of(`Ethereum Signed Message:
`).bytes;provider;constructor(a){this.provider=a}async populateCall(a){if(void 0===a.from||null===a.from)a.from=$.Address.checksum($.HexUInt.of(await this.getAddress()));else if($.Address.checksum($.HexUInt.of(a.from))!==$.Address.checksum($.HexUInt.of(await this.getAddress())))throw new r("VeChainAbstractSigner.populateCall()","From address does not match the signer address.",{signerAddress:$.Address.checksum($.HexUInt.of(await this.getAddress())),fromAddress:$.Address.checksum($.HexUInt.of(a.from))});return void 0===a.to&&(a.to=null),void 0!==a.clauses&&a.clauses.length>0&&(a.to=a.clauses[0].to,a.value=a.clauses[0].value,a.data=a.clauses[0].data),a}async populateTransaction(a){if(void 0===this.provider)throw new G("VechainAbstractSigner.populateTransaction()","Thor client not found into the signer. Please attach a Provider with a thor client to your signer instance.",{provider:this.provider});let b=this.provider.thorClient,c=await this.populateCall(a),d;return void 0!==a.gasLimit?(console.warn("\n****************** WARNING: Deprecated Property Usage ******************\n- The `gasLimit` property is deprecated and will be removed in a future release.\n- Please use the `gas` property instead.\n- The `gasLimit` value will be used as the `gas` value for this transaction.\n"),d=Number(a.gasLimit)):d=void 0!==a.gas?Number(a.gas):await this.estimateGas(a),await b.transactions.buildTransactionBody(c.clauses??this._buildClauses(c),d,{isDelegated:this.provider?.enableDelegation,nonce:c.nonce??await this.getNonce("pending"),blockRef:c.blockRef??void 0,chainTag:c.chainTag??void 0,dependsOn:c.dependsOn??void 0,expiration:c.expiration,gasPriceCoef:c.gasPriceCoef??void 0,maxPriorityFeePerGas:c.maxPriorityFeePerGas??void 0,maxFeePerGas:c.maxFeePerGas??void 0,gas:a.gas,gasLimit:a.gasLimit})}async estimateGas(a){if(void 0===this.provider)throw new G("VechainAbstractSigner.estimateGas()","Thor client not found into the signer. Please attach a Provider with a thor client to your signer instance.",{provider:this.provider});let b=this.provider.thorClient,c=await this.populateCall(a);return(await b.transactions.estimateGas(c.clauses??this._buildClauses(c),c.from)).totalGas}async call(a,b){if(void 0===this.provider)throw new G("VechainAbstractSigner.call()","Thor client not found into the signer. Please attach a Provider with a thor client to your signer instance.",{provider:this.provider});let c=this.provider.thorClient,d=await this.populateCall(a);return(await c.transactions.simulateTransaction(d.clauses??this._buildClauses(d),{revision:b??void 0,gas:d.gas??void 0,gasPrice:d.gasPrice??void 0,caller:d.from,provedWork:d.provedWork??void 0,gasPayer:d.gasPayer??void 0,expiration:d.expiration??void 0,blockRef:d.blockRef??void 0}))[0].data}async getNonce(a){return void 0!==this.provider?await this.provider.request({method:"eth_getTransactionCount",params:[await this.getAddress(),a]}):$.Hex.random(6).toString()}async signMessage(a){try{let b="string"==typeof a?$.Txt.of(a).bytes:a,c=$.Keccak256.of((0,ad.concatBytes)(this.MESSAGE_PREFIX,$.Txt.of(b.length).bytes,b)).bytes;return await this.signPayload(c)}catch(b){throw new T("VeChainAbstractSigner.signMessage","The message could not be signed.",{message:a},b)}}deducePrimaryType(a){let b=new Map;for(let c in Object.keys(a).forEach(a=>{b.set(a,[])}),a)for(let d of a[c]){let a=d.type.split("[")[0];b.has(a)&&b.get(a)?.push(c)}let c=Array.from(b.keys()).filter(a=>b.get(a)?.length===0);if(1!==c.length)throw new T("VeChainAbstractSigner.deducePrimaryType","Ambiguous primary types or unused types.",{primaryTypes:c.join(", ")});return c[0]}async signTypedData(a,b,c,d){try{let e={chainId:void 0,name:a.name,salt:a.salt,verifyingContract:a.verifyingContract,version:a.version};if(void 0!==a.chainId)if("string"==typeof a.chainId||"number"==typeof a.chainId)e.chainId=BigInt(a.chainId);else if("bigint"==typeof a.chainId)e.chainId=a.chainId;else throw new r("VeChainAbstractSigner.signTypedData","Invalid chainId type.",{chainId:a.chainId});let f=$.Hex.of((0,ae.hashTypedData)({domain:e,types:b,primaryType:d??this.deducePrimaryType(b),message:c})).bytes;return await this.signPayload(f)}catch(e){throw new T("VeChainAbstractSigner.signTypedData","The typed data could not be signed.",{domain:a,types:b,message:c,primaryType:d},e)}}async resolveName(a){return void 0===this.provider?null:await aJ.resolveName(this.provider.thorClient,a)}_buildClauses(a){return void 0!==a.to&&null!==a.to?[{to:a.to,data:a.data??"0x",value:a.value??"0x0"}]:[$.Clause.deployContract($.HexUInt.of(a.data??0),void 0,{value:void 0===a.value?a.value:$.HexUInt.of(a.value).toString(!0),comment:a.comment})]}},a9=class a extends a8{constructor(a,b){if(!$.Secp256k1.isValidPrivateKey(a))throw new Q("VeChainPrivateKeySigner.constructor()","Invalid private key used to sign initialize the signer. Ensure it's a valid Secp256k1 private key.",void 0);super(b),this.privateKey=a}connect(b){return new a(this.privateKey,b)}async getAddress(){return $.Address.checksum($.HexUInt.of(await Promise.resolve($.Address.ofPrivateKey(this.privateKey).toString())))}async signTransaction(a){if(void 0===this.provider)throw new G("VeChainPrivateKeySigner.signTransaction()","Thor provider is not found into the signer. Please attach a Provider to your signer instance.",{transactionToSign:a});let b=a3(await this.provider.wallet?.getGasPayer()).gasPayerOrNull();return void 0!==a.delegationUrl&&(b={gasPayerServiceUrl:a.delegationUrl}),await this._signFlow(a,b,this.provider.thorClient)}async sendTransaction(a){if(void 0===this.provider)throw new G("VeChainPrivateKeySigner.sendTransaction()","Thor provider is not found into the signer. Please attach a Provider to your signer instance.",{transactionToSend:a});let b=this.provider,c=await this.signTransaction(a);return await b.request({method:"eth_sendRawTransaction",params:[c]})}async signPayload(a){let b=$.Secp256k1.sign(a,new Uint8Array(this.privateKey));return b[b.length-1]+=27,await Promise.resolve($.Hex.of(b).toString())}async _signFlow(a,b,c){let d=await this.populateTransaction(a);return null!==b?await this._signWithGasPayer(d,this.privateKey,c,b):$.Hex.of($.Transaction.of(d).sign(this.privateKey).encoded).toString()}async _signWithGasPayer(a,b,c,d){let e=$.Address.ofPrivateKey(b).toString(),f=$.Transaction.of(a);if(d?.gasPayerPrivateKey!==void 0){if(!$.HexUInt.isValid(d.gasPayerPrivateKey))throw new r("VeChainPrivateKeySigner._signWithGasPayer","Invalid gas payer private key. Ensure it is a valid hexadecimal string.",{gasPayerPrivateKey:d.gasPayerPrivateKey});return $.Hex.of($.Transaction.of(a).signAsSenderAndGasPayer(b,$.HexUInt.of(d.gasPayerPrivateKey).bytes).encoded).toString()}let g=await a3(d).getDelegationSignatureUsingUrl(f,e,c.httpClient),h=$.Secp256k1.sign(f.getTransactionHash().bytes,b),i=new Uint8Array(h.length+g.length);return i.set(h),i.set(g,h.length),$.Hex.of($.Transaction.of(f.body,i).encoded).toString()}},ba=class{accounts;gasPayer;constructor(a,b){this.accounts=a,this.gasPayer=b?.gasPayer}getSignerSync(a,b){let c=this.getAccountSync(b);return c?.privateKey!==void 0?new a9(c.privateKey,a):null}getAddressesSync(){return this.accounts.map(a=>a.address)}getAccountSync(a){if(void 0===a||"number"==typeof a)return this.accounts[a??0]??null;if(!$.Address.isValid(a))throw new r("AbstractProviderInternalWallet.getAccountSync()","Invalid params expected an address.",{addressOrIndex:a});return this.accounts.find(b=>$.Address.checksum($.HexUInt.of(b.address))===$.Address.checksum($.HexUInt.of(a)))??null}getGasPayerSync(){return a3(this.gasPayer).gasPayerOrNull()}},bb=class extends ba{async getSigner(a,b){return await Promise.resolve(this.getSignerSync(a,b))}async getAddresses(){return await Promise.resolve(this.getAddressesSync())}async getAccount(a){return await Promise.resolve(this.getAccountSync(a))}async getGasPayer(){return await Promise.resolve(this.getGasPayerSync())}},bc=class extends bb{mnemonic;derivationPath;count;initialIndex;constructor(a,b=1,c=0,d=$.HDKey.VET_DERIVATION_PATH,e){super([...Array(b).keys()].map(b=>{let e=$.HDKey.fromMnemonic(a,d).deriveChild(b+c).privateKey;return{privateKey:e,publicKey:$.Secp256k1.derivePublicKey(e),address:$.Address.ofPrivateKey(e).toString()}}),e),this.mnemonic=a,this.derivationPath=d,this.count=b,this.initialIndex=c}},bd=class extends ac.JsonRpcApiProvider{hardhatProvider;constructor(a,b,c){super({name:b,chainId:a}),this.hardhatProvider=c}async send(a,b){return this._start(),await super.send(a,b)}async _send(a){let b=Array.isArray(a)?a:[a],c=[];for(let a of b)try{let b=await this.hardhatProvider.send(a.method,a.params);c.push({id:a.id,result:b})}catch(b){c.push({id:a.id,error:{code:-32603,message:e(b)}})}return c}},be=5e3,bf=["latest","earliest","pending","safe","finalized"],bg=a=>{if($.HexUInt.isValid(a))return $.Revision.of($.HexUInt.of(a).n.toString());if(!bf.includes(a)){let b=a.toString();throw new I("DefaultBlockToRevision",`Invalid default block: ${b}`,b,null)}return"earliest"===a?$.Revision.of($.HexUInt.of(0)):"safe"===a?$.Revision.of("justified"):"finalized"===a?$.Revision.of("finalized"):$.Revision.of("best")},bh={MAINNET:"0x186a9",TESTNET:"0x186aa",SOLO_DEFAULT:"0xf6"},bi={MAINNET:"0x4a",TESTNET:"0x27",SOLO_DEFAULT:"0xf6"},bj=a=>a.isEqual($.HexUInt.of(bi.MAINNET))?$.HexUInt.of(bh.MAINNET):a.isEqual($.HexUInt.of(bi.TESTNET))?$.HexUInt.of(bh.TESTNET):a.isEqual($.HexUInt.of(bi.SOLO_DEFAULT))?$.HexUInt.of(bh.SOLO_DEFAULT):a,bk=(a,b)=>{let c="string"==typeof a.transactions[0]?a.transactions.findIndex(a=>a===b):a.transactions.findIndex(a=>a.hash===b);if(-1===c)throw new r("getTransactionIndexIntoBlock()","Transaction not found in block.",{block:a,hash:b});return c},bl=(a,b,c)=>{let d=bk(bp.formatToRPCStandard(a,c),b),e=0;for(let b=0;b<d;b++)for(let c of a.transactions[b].outputs)e+=c.events.length;return e},bm=a=>null==a||"number"!=typeof a?"0x0":a===(0,$.fromTransactionType)($.TransactionType.EIP1559)?"0x2":"0x0",bn=(a,b,c,d,e)=>{let f="type"in a?a.type:0;return{blockHash:b,blockNumber:$.Quantity.of(c).toString(),from:a.origin,gas:$.Quantity.of($.HexUInt.of(a.gas).bi).toString(),chainId:d,hash:a.id,nonce:a.nonce,transactionIndex:$.Quantity.of(e).toString(),input:a.clauses[0]?.data??"",to:a.clauses[0]?.to??null,value:a.clauses[0]?.value!==void 0?$.Quantity.of($.HexUInt.of(a.clauses[0].value).bi).toString():"",type:bm(f),maxFeePerGas:void 0!==a.maxFeePerGas&&null!==a.maxFeePerGas?$.Quantity.of($.HexUInt.of(a.maxFeePerGas).bi).toString():void 0,maxPriorityFeePerGas:void 0!==a.maxPriorityFeePerGas&&null!==a.maxPriorityFeePerGas?$.Quantity.of($.HexUInt.of(a.maxPriorityFeePerGas).bi).toString():void 0,gasPrice:"0x0",v:"0x0",r:"0x0",s:"0x0",accessList:[],yParity:"0x0"}},bo={formatToRPCStandard:(a,b,c)=>bn(a,a.meta.blockID,a.meta.blockNumber,b,c),formatExpandedBlockToRPCStandard:(a,b,c,d)=>bn(a,b.id,b.number,d,c),formatTransactionReceiptToRPCStandard:function(a,b,c,d,e){let f=bk(bp.formatToRPCStandard(d,e),a),g=bl(d,a,e),h=[],i=g;b.outputs.forEach(a=>{a.events.forEach(a=>{h.push({blockHash:b.meta.blockID,blockNumber:$.Quantity.of(b.meta.blockNumber).toString(),transactionHash:b.meta.txID,address:a.address,topics:a.topics.map(a=>a),data:a.data,removed:!1,transactionIndex:$.Quantity.of(f).toString(),logIndex:$.Quantity.of(i).toString()}),i++})});let j="type"in c?c.type:0;return{blockHash:b.meta.blockID,blockNumber:$.Quantity.of(b.meta.blockNumber).toString(),contractAddress:b.outputs.length>0?b.outputs[0].contractAddress:null,from:c.origin,gasUsed:$.Quantity.of(b.gasUsed).toString(),logs:h,status:b.reverted?"0x0":"0x1",to:c.clauses[0].to,transactionHash:b.meta.txID,transactionIndex:$.Quantity.of(f).toString(),logsBloom:$.Hex.of((0,$.ZERO_BYTES)(256)).toString(),cumulativeGasUsed:"0x0",effectiveGasPrice:"0x0",type:bm(j)}}},bp={formatToRPCStandard:(a,b)=>{let c="string"==typeof a.transactions[0]?a.transactions:a.transactions.map((c,d)=>bo.formatExpandedBlockToRPCStandard(c,a,d,b));return{hash:a.id,parentHash:a.parentID,number:$.Quantity.of(a.number).toString(),size:$.Quantity.of(a.size).toString(),stateRoot:a.stateRoot,receiptsRoot:a.receiptsRoot,transactionsRoot:a.txsRoot,timestamp:$.Quantity.of(a.timestamp).toString(),gasLimit:$.Quantity.of(a.gasLimit).toString(),gasUsed:$.Quantity.of(a.gasUsed).toString(),transactions:c,miner:a.beneficiary,baseFeePerGas:a.baseFeePerGas,difficulty:"0x0",totalDifficulty:"0x0",uncles:[],sha3Uncles:$.HexUInt.of((0,$.ZERO_BYTES)(32)).toString(),nonce:$.HexUInt.of((0,$.ZERO_BYTES)(8)).toString(),logsBloom:$.HexUInt.of((0,$.ZERO_BYTES)(256)).toString(),extraData:"0x",...void 0!==a.baseFeePerGas?{baseFeePerGas:a.baseFeePerGas}:{},mixHash:$.HexUInt.of((0,$.ZERO_BYTES)(32)).toString()}}};function bq(a,b){return"call"===a?{...b,revertReason:""}:Object.fromEntries(Object.entries(b).map(([a,b])=>[a,{...{balance:b.balance,code:b.code,storage:b.storage},nonce:0}]))}var br={formatToRPCStandard:bq},bs=a=>a.map(a=>({address:a.address,blockHash:a.meta.blockID,blockNumber:$.HexInt.of(a.meta.blockNumber).toString(),data:a.data,logIndex:"0x0",removed:!1,topics:a.topics,transactionHash:a.meta.txID,transactionIndex:"0x0"})),bt=a=>(void 0!==a.address?"string"==typeof a.address?[a.address]:a.address:[void 0]).map(b=>bu(b,a.topics??[])).flat(),bu=(a,b)=>{let c=[],d=[];b.forEach(a=>{Array.isArray(a)||c.push(a),Array.isArray(a)&&d.push(a)});let e=[];return c.length>0&&e.push(((a,b)=>({address:b,topic0:a[0]??void 0,topic1:a[1]??void 0,topic2:a[2]??void 0,topic3:a[3]??void 0,topic4:a[4]??void 0}))(c,a)),d.forEach(b=>{b.forEach(b=>{e.push({address:a,topic0:b,topic1:void 0,topic2:void 0,topic3:void 0,topic4:void 0})})}),0===e.length&&e.push({address:a,topic0:void 0,topic1:void 0,topic2:void 0,topic3:void 0,topic4:void 0}),e},bv=null,bw=null,bx=null,by=async a=>{try{if(null!==bv)return bv.toString();let b=await a.blocks.getGenesisBlock();if(b?.id===null||b?.id===void 0)throw new G("eth_chainId()","The genesis block id is null or undefined. Unable to get the chain id.",{url:a.httpClient.baseURL});if(!$.Hex.isValid(b.id))throw new G("eth_chainId()","The genesis block id is invalid. Unable to get the chain id.",{url:a.httpClient.baseURL});return bx=$.Hex.of(b.id),bw=$.HexUInt.of(bx.bytes.slice(-1)),(bv=bj(bw)).toString()}catch(b){throw new H("eth_chainId()",'Method "eth_chainId" failed.',{url:a.httpClient.baseURL,innerError:e(b)})}},bz=async a=>null!==bv?bv.toString():await by(a),bA=async a=>null!==bw?bw.toString():await by(a),bB=async(a,b)=>{if(1!==b.length||"string"!=typeof b[0])throw new G("eth_getTransactionReceipt",`Invalid input params for "eth_getTransactionReceipt" method. See ${az} for details.`,{params:b});if(!$.ThorId.isValid(b[0]))throw new G("eth_getTransactionReceipt","Invalid transaction ID given as input. Input must be an hex string of length 64.",{params:b});try{let[c]=b,d=await a.transactions.getTransactionReceipt(c);if(null===d)return null;{let b=await a.blocks.getBlockExpanded(d.meta.blockID),e=await a.transactions.getTransaction(c),f=await by(a);return null!==e?bo.formatTransactionReceiptToRPCStandard(c,d,e,b,f):null}}catch(c){throw new H("eth_getTransactionReceipt()",'Method "eth_getTransactionReceipt" failed.',{params:e(b),url:a.httpClient.baseURL,innerError:e(c)})}},bC=async(a,b)=>{if(2!==b.length||"string"!=typeof b[0]||"object"!=typeof b[1])throw new G("debug_traceTransaction",`Invalid input params for "debug_traceTransaction" method. See ${az} for details.`,{params:b});let[c,d]=b;if(!$.ThorId.isValid(c))throw new r("debug_traceTransaction()","Invalid transaction ID given as input. Input must be an hex string of length 64.",{transactionId:c});let f="callTracer"===d.tracer?"call":"prestate";try{let b=await bB(a,[c]),d=await a.debug.traceTransactionClause({target:{blockId:$.ThorId.of(b?.blockHash),transaction:$.ThorId.of(b?.transactionHash),clauseIndex:0},config:{}},f);return br.formatToRPCStandard(f,d)}catch(c){throw new H("debug_traceTransaction()",'Method "debug_traceTransaction" failed.',{params:e(b),url:a.httpClient.baseURL,innerError:e(c)})}},bD=async(a,b)=>{if(2!==b.length||"string"!=typeof b[0]||!$.ThorId.isValid(b[0])||"boolean"!=typeof b[1])throw new G("eth_getBlockByHash",`Invalid input params for "eth_getBlockByHash" method. See ${az} for details.`,{params:b});try{let[c,d]=b,e="0x0";d&&(e=await by(a));let f=d?await a.blocks.getBlockExpanded(c):await a.blocks.getBlockCompressed(c);return null!==f?bp.formatToRPCStandard(f,e):null}catch(c){throw new H("eth_getBlockByHash()",'Method "eth_getBlockByHash" failed.',{params:e(b),url:a.httpClient.baseURL,innerError:e(c)})}},bE=async(a,b)=>{if(2!==b.length||"string"!=typeof b[0]||!$.ThorId.isValid(b[0])||"object"!=typeof b[1])throw new G("debug_traceBlockByHash",'Invalid input params for "debug_traceBlockByHash" method. See https://www.quicknode.com/docs/ethereum/debug_traceBlockByHash for details.',{params:b});let[c,d]=b;try{let b=await bD(a,[c,!1]);if(null===b)return[];let e=[];for(let c of b.transactions){let b=await bC(a,[c,{...d,timeout:"5s"}]);e.push({txHash:c,result:b})}return e}catch(c){throw new H("debug_traceBlockByHash()",'Method "debug_traceBlockByHash" failed.',{params:e(b),url:a.httpClient.baseURL,innerError:e(c)})}},bF=async(a,b)=>{if(2!==b.length||"string"!=typeof b[0]||"boolean"!=typeof b[1])throw new G("eth_getBlockByNumber",`Invalid input params for "eth_getBlockByNumber" method. See ${az} for details.`,{params:b});try{let[c,d]=b,e=bg(c),f="0x0";d&&(f=await by(a));let g=d?await a.blocks.getBlockExpanded(e.toString()):await a.blocks.getBlockCompressed(e.toString());return null!==g?bp.formatToRPCStandard(g,f):null}catch(c){throw new H("eth_getBlockByNumber()",'Method "eth_getBlockByNumber" failed.',{params:e(b),url:a.httpClient.baseURL,innerError:e(c)})}},bG=async(a,b)=>{if(2!==b.length||"string"!=typeof b[0]||"object"!=typeof b[1])throw new G("debug_traceBlockByNumber",'Invalid input params for "debug_traceBlockByNumber" method. See https://www.quicknode.com/docs/ethereum/debug_traceBlockByNumber for details.',{params:b});let[c,d]=b;try{let b=await bF(a,[c,!1]);if(null===b)return[];let e=[];for(let c of b.transactions){let b=await bC(a,[c,{...d,timeout:"5s"}]);e.push({txHash:c,result:b})}return e}catch(c){throw new H("debug_traceBlockByNumber()",'Method "debug_traceBlockByNumber" failed.',{params:e(b),url:a.httpClient.baseURL,innerError:e(c)})}},bH=async(a,b)=>{if(3!==b.length||"object"!=typeof b[0]||"string"!=typeof b[1]||"object"!=typeof b[2])throw new G("debug_traceCall",`Invalid input params for "debug_traceCall" method. See ${az} for details.`,{params:b});let c=b[0],d=b[2],f="callTracer"===d.tracer?"call":"prestate";try{let b=await a.debug.traceContractCall({options:{caller:c.from,gas:void 0!==c.gas?parseInt(c.gas,16):void 0,gasPrice:c.gasPrice},target:{to:"string"==typeof c.to?$.Address.of(c.to):c.to,data:"string"==typeof c.data?$.HexUInt.of(c.data):void 0},config:d.tracerConfig},f);return br.formatToRPCStandard(f,b)}catch(c){throw new H("debug_traceCall()",'Method "debug_traceCall" failed.',{params:e(b),url:a.httpClient.baseURL,innerError:e(c)})}},bI=async()=>((0,af.VeChainSDKLogger)("warning").log({title:"engine_getPayloadBodiesByHashV1",messages:['Method "engine_getPayloadBodiesByHashV1" has not been implemented yet.']}),await Promise.resolve("METHOD NOT IMPLEMENTED")),bJ=async()=>((0,af.VeChainSDKLogger)("warning").log({title:"engine_getPayloadBodiesByRangeV1",messages:['Method "engine_getPayloadBodiesByRangeV1" has not been implemented yet.']}),await Promise.resolve("METHOD NOT IMPLEMENTED")),bK=async a=>a?.wallet!==void 0?await a?.wallet.getAddresses():[],bL=async a=>{try{let b=await a.blocks.getBestBlockCompressed();return b?.number!==void 0?`0x${b.number.toString(16)}`:"0x0"}catch(b){throw new H("eth_blockNumber()",'Method "eth_blockNumber" failed.',{url:a.httpClient.baseURL,innerError:e(b)})}},bM=async(a,b)=>{if(2!==b.length||"object"!=typeof b[0]||"object"!=typeof b[1]&&"string"!=typeof b[1])throw new G("eth_call",`Invalid input params for "eth_call" method. See ${az} for details.`,{params:b});try{let[c,d]=b,e=await a.transactions.simulateTransaction([{to:c.to??null,value:c.value??"0x0",data:c.data??"0x0"}],{revision:bg(d),gas:void 0!==c.gas?parseInt(c.gas,16):void 0,gasPrice:c.gasPrice??c.gasPrice,caller:c.from});if(e[0].reverted)throw new L(e[0].vmError,e[0].data);return e[0].data}catch(c){throw c instanceof H||c instanceof L?c:c instanceof x?new H("eth_call()",'Method "eth_call" failed due to network communication error.',{params:e(b),url:a.httpClient.baseURL,networkError:!0,networkErrorType:c.data.networkErrorType,innerError:e(c)}):new H("eth_call()",'Method "eth_call" failed.',{params:e(b),url:a.httpClient.baseURL,innerError:e(c)})}},bN=async(a,b)=>{if(b.length<1||b.length>2||"object"!=typeof b[0])throw new G("eth_estimateGas",`Invalid input params for "eth_estimateGas" method. See ${az} for details.`,{params:b});try{1===b.length&&b.push("latest");let[c,d]=b,e=bg(d),f=await a.transactions.estimateGas([{to:c.to??null,value:c.value??"0x0",data:c.data??"0x"}],c.from,{revision:e});if(f.reverted){let b=await a.transactions.simulateTransaction([{to:c.to??null,value:c.value??"0x0",data:c.data??"0x"}],{revision:e,caller:c.from}),d=f.revertReasons.find(a=>""!==a)??f.vmErrors.find(a=>""!==a)??"execution reverted",g=b[0].data||"0x";throw g.startsWith("0x")||(g="0x"+g),new L(d.toString(),g)}return $.HexUInt.of(f.totalGas).toString(!0)}catch(c){throw c instanceof L?c:c instanceof x?new H("eth_estimateGas()",'Method "eth_estimateGas" failed due to network communication error.',{params:e(b),url:a.httpClient.baseURL,networkError:!0,networkErrorType:c.data.networkErrorType,innerError:e(c)}):new H("eth_estimateGas()",'Method "eth_estimateGas" failed.',{params:e(b),url:a.httpClient.baseURL,innerError:e(c)})}},bO=async(a,b,c)=>{if(!Array.isArray(b)||b.length<2)throw new G("eth_feeHistory",'Invalid input params for "eth_feeHistory" method.',{params:b});if(!await a.forkDetector.detectGalactica())throw new K("eth_feeHistory",'Method "eth_feeHistory" is not available before Galactica hardfork.',{url:a.httpClient.baseURL});let d=b[0],f=b[1],g=b[2];if("string"!=typeof f&&"number"!=typeof f)throw new G("eth_feeHistory","Invalid newestBlock parameter. Must be a string or number.",{newestBlock:f});let h=Number(d);if(!Number.isFinite(h)||h<=0)throw new G("eth_feeHistory","blockCount must be a positive finite number.",{blockCount:d,blockCountNum:h});let i=bg(f);try{return await a.gas.getFeeHistory({blockCount:h,newestBlock:i.toString(),rewardPercentiles:g})}catch(b){throw b instanceof G?b:new H("eth_feeHistory()",'Method "eth_feeHistory" failed.',{url:a.httpClient.baseURL,innerError:e(b)})}},bP=async a=>{if(!await a.forkDetector.detectGalactica()){let{result:{plain:b}}=await a.contracts.getLegacyBaseGasPrice();return $.HexUInt.of(b).toString(!0)}let b=await a.blocks.getBestBlockCompressed(),c=b?.baseFeePerGas;if(void 0===c)throw new H("eth_gasPrice","Last block should have baseFeePerGas defined.",{params:b,url:a.httpClient.baseURL});let d=await a.gas.getMaxPriorityFeePerGas(),e=$.HexUInt.of(c).bi,f=$.HexUInt.of(d).bi;return $.HexUInt.of(e+f).toString(!0)},bQ=async(a,b)=>{if(2!==b.length||"string"!=typeof b[0]||"object"!=typeof b[1]&&"string"!=typeof b[1])throw new G("eth_getBalance",`Invalid input params for "eth_getBalance" method. See ${az} for details.`,{params:b});try{let[c,d]=b;return(await a.accounts.getAccount($.Address.of(c),{revision:bg(d)})).balance}catch(c){throw new H("eth_getBalance()",'Method "eth_getBalance" failed.',{params:e(b),url:a.httpClient.baseURL,innerError:e(c)})}},bR=async(a,b)=>{if(1!==b.length||"string"!=typeof b[0])throw new G("eth_getBlockReceipts",`Invalid input params for "eth_getBlockReceipts" method. See ${az} for details.`,{params:b});try{let[c]=b,d=null;if(d=$.HexUInt.isValid(c)&&66===c.length?await bD(a,[c,!0]):await bF(a,[c,!0]),null===d)return null;let e=d.transactions,f=[];for(let b of e){let c=await bB(a,[b.hash]);f.push(c)}return f}catch(c){throw new H("eth_getBlockReceipts()",'Method "eth_getBlockReceipts" failed.',{params:e(b),url:a.httpClient.baseURL,innerError:e(c)})}},bS=async(a,b)=>{if(1!==b.length||"string"!=typeof b[0]||!$.ThorId.isValid(b[0]))throw new G("eth_getBlockTransactionCountByHash",`Invalid input params for "eth_getBlockTransactionCountByHash" method. See ${az} for details.`,{params:b});let c=await bD(a,[b[0],!1]);return null!==c?c.transactions.length:0},bT=async(a,b)=>{if(1!==b.length||"string"!=typeof b[0])throw new G("eth_getBlockTransactionCountByNumber",`Invalid input params for "eth_getBlockTransactionCountByNumber" method. See ${az} for details.`,{params:b});let c=await bF(a,[b[0],!0]);return null!==c?c.transactions.length:0},bU=async(a,b)=>{if(2!==b.length||"string"!=typeof b[0]||"object"!=typeof b[1]&&"string"!=typeof b[1])throw new G("eth_getCode",`Invalid input params for "eth_getCode" method. See ${az} for details.`,{params:b});try{let[c,d]=b;return(await a.accounts.getBytecode($.Address.of(c),{revision:bg(d)})).toString()}catch(c){throw new H("eth_getCode()",'Method "eth_getCode" failed.',{params:e(b),url:a.httpClient.baseURL,innerError:e(c)})}},bV=async()=>((0,af.VeChainSDKLogger)("warning").log({title:"eth_getFilterChanges",messages:['Method "eth_getFilterChanges" has not been implemented yet.']}),await Promise.resolve("METHOD NOT IMPLEMENTED")),bW=async()=>((0,af.VeChainSDKLogger)("warning").log({title:"eth_getFilterLogs",messages:['Method "eth_getFilterLogs" has not been implemented yet.']}),await Promise.resolve("METHOD NOT IMPLEMENTED")),bX=async(a,b)=>{if(1!==b.length||"object"!=typeof b[0])throw new G("eth_getLogs",`Invalid input params for "eth_getLogs" method. See ${az} for details.`,{params:b});let[c]=b;try{let b=await a.blocks.getBestBlockCompressed(),d=bt({address:null!==c.address?c.address:void 0,topics:c.topics}),e=await a.logs.filterRawEventLogs({range:{unit:"block",from:void 0!==c.fromBlock?parseInt(c.fromBlock,16):b.number,to:void 0!==c.toBlock?parseInt(c.toBlock,16):b.number},criteriaSet:d,order:"asc",options:{offset:0,limit:1e3}});return bs(e)}catch(c){throw new H("eth_getLogs()",'Method "eth_getLogs" failed.',{params:e(b),url:a.httpClient.baseURL,innerError:e(c)})}},bY=async(a,b)=>{if(3!==b.length||"string"!=typeof b[0]||"string"!=typeof b[1]&&"bigint"!=typeof b[1]||null!=b[2]&&"object"!=typeof b[2]&&"string"!=typeof b[2])throw new G("eth_getStorageAt",`Invalid input params for "eth_getStorageAt" method. See ${az} for details.`,{params:b});try{b[2]??="latest";let[c,d,e]=b;return(await a.accounts.getStorageAt($.Address.of(c),$.ThorId.of(d),{revision:bg(e)})).toString()}catch(c){throw new H("eth_getStorageAt()",'Method "eth_getStorageAt" failed.',{params:e(b),url:a.httpClient.baseURL,innerError:e(c)})}},bZ=async(a,b)=>{if(1!==b.length||"string"!=typeof b[0])throw new G("eth_getTransactionByHash",`Invalid input params for "eth_getTransactionByHash" method. See ${az} for details.`,{params:b});try{let[c]=b,d=await a.transactions.getTransaction(c);if(null===d)return null;let e=await bD(a,[d.meta.blockID,!1]);if(null===e)return null;let f=bk(e,c),g=await by(a);return bo.formatToRPCStandard(d,g,f)}catch(c){throw new H("eth_getTransactionByHash()",'Method "eth_getTransactionByHash" failed.',{params:e(b),url:a.httpClient.baseURL,innerError:e(c)})}},b$=async(a,b)=>{if(2!==b.length||"string"!=typeof b[0]||"string"!=typeof b[1])throw new G("eth_getTransactionByBlockHashAndIndex",`Invalid input params for "eth_getTransactionByBlockHashAndIndex" method. See ${az} for details.`,{params:b});try{let[c,d]=b;for(let b of(await bD(a,[c,!1])).transactions){let c=await bZ(a,[b]);if(c.transactionIndex===d)return c}return null}catch(c){throw new H("eth_getTransactionByBlockHashAndIndex()",'Method "eth_getTransactionByBlockHashAndIndex" failed.',{params:e(b),url:a.httpClient.baseURL,innerError:e(c)})}},b_=async(a,b)=>{if(2!==b.length||"string"!=typeof b[0]||"string"!=typeof b[1])throw new G("eth_getTransactionByBlockNumberAndIndex",`Invalid input params for "eth_getTransactionByBlockNumberAndIndex" method. See ${az} for details.`,{params:b});try{let[c,d]=b;for(let b of(await bF(a,[c,!1])).transactions){let c=await bZ(a,[b]);if(c.transactionIndex===d)return c}return null}catch(c){throw new H("eth_getTransactionByBlockNumberAndIndex()",'Method "eth_getTransactionByBlockNumberAndIndex" failed.',{params:e(b),url:a.httpClient.baseURL,innerError:e(c)})}},b0=async a=>{if("string"!=typeof a[0]||"object"!=typeof a[1]&&"string"!=typeof a[1])throw new G("eth_getTransactionCount",`Invalid input params for "eth_getTransactionCount" method. See ${az} for details.`,{params:a});if(!$.Address.isValid(a[0]))throw new G("eth_getTransactionCount","Invalid address, expected a 20 bytes address string.",{params:a});return await Promise.resolve($.Hex.of($.Secp256k1.randomBytes(6)).toString())},b1=async a=>{if(2!==a.length||"string"!=typeof a[0]||!$.ThorId.isValid(a[0])||"string"!=typeof a[1])throw new G("eth_getUncleByBlockHashAndIndex",'Invalid input params for "eth_getUncleByBlockHashAndIndex" method. See https://docs.infura.io/api/networks/ethereum/json-rpc-methods/eth_getunclebyblockhashandindex for details.',{params:a});return await Promise.resolve(null)},b2=async a=>{if(2!==a.length||"string"!=typeof a[0]||"string"!=typeof a[1])throw new G("eth_getUncleByBlockNumberAndIndex",'Invalid input params for "eth_getUncleByBlockNumberAndIndex" method. See https://docs.infura.io/api/networks/ethereum/json-rpc-methods/eth_getunclebyblocknumberandindex for details.',{params:a});return await Promise.resolve(null)},b3=async a=>{if(1!==a.length||"string"!=typeof a[0]||!$.ThorId.isValid(a[0]))throw new G("eth_getUncleCountByBlockHash",`Invalid input params for "eth_getUncleCountByBlockHash" method. See ${az} for details.`,{params:a});return await Promise.resolve(0)},b4=async a=>{if(1!==a.length||"string"!=typeof a[0])throw new G("eth_getUncleCountByBlockNumber",`Invalid input params for "eth_getUncleCountByBlockNumber" method. See ${az} for details.`,{params:a});return await Promise.resolve(0)},b5=async(a,b,c)=>{try{if(!await a.forkDetector.detectGalactica())throw new K("eth_maxPriorityFeePerGas",'Method "eth_maxPriorityFeePerGas" is not available before Galactica hardfork.',{url:a.httpClient.baseURL});return await a.gas.getMaxPriorityFeePerGas()}catch(b){throw b instanceof H||b instanceof K?b:new H("eth_maxPriorityFeePerGas()",'Method "eth_maxPriorityFeePerGas" failed.',{url:a.httpClient.baseURL,innerError:e(b)})}},b6=async a=>{let b=await bK(a);if(0===b.length)throw new G("eth_requestAccounts()",'Method "eth_requestAccounts" failed.',{provider:e(a)});return b},b7=async(a,b)=>{if(1!==b.length||"string"!=typeof b[0])throw new G("eth_sendRawTransaction()",`Invalid input params for "eth_sendRawTransaction" method. See ${az} for details.`,{params:b});if(!$.Hex.isValid0x(b[0]))throw new G("eth_sendRawTransaction()","Invalid transaction encoded data given as input. Input must be a hex string.",{params:b});try{let[c]=b;return(await a.transactions.sendRawTransaction(c)).id}catch(c){throw new H("eth_sendRawTransaction()",'Method "eth_sendRawTransaction" failed.',{params:e(b),url:a.httpClient.baseURL},c)}},b8=async(a,b,c)=>{if(void 0===b||1!==b.length||"object"!=typeof b[0])throw new G("eth_sendTransaction",`Invalid input params for "eth_sendTransaction" method. See ${az} for details.`,{params:b});if(c?.wallet===void 0)throw new G("eth_sendTransaction","Provider must be defined with a wallet. Ensure that the provider is defined and connected to the network.",{provider:c});if(void 0===b[0].from)throw new G("eth_sendTransaction","From field is required in the transaction object.",{provider:c});void 0===b[0].value&&(b[0].value="0x0");let[d]=b,f=await bz(a);if(null!=d.chainId&&d.chainId!==f)throw new G("eth_sendTransaction",`ChainId in the transaction object does not match the chainId of the network. Expected: ${f}, Received: ${d.chainId}`,{chainId:d.chainId});try{return await (await c.getSigner(d.from)).sendTransaction(d)}catch(c){throw c instanceof x?new H("eth_sendTransaction()",'Method "eth_sendTransaction" failed due to network communication error.',{params:e(b),url:a.httpClient.baseURL,networkError:!0,networkErrorType:c.data.networkErrorType},c):new H("eth_sendTransaction()",'Method "eth_sendTransaction" failed.',{params:e(b),url:a.httpClient.baseURL},c)}},b9=async(a,b,c)=>{if(1!==b.length||"object"!=typeof b[0])throw new G("eth_signTransaction",`Invalid input params for "eth_signTransaction" method. See ${az} for details.`,{params:b});if(c?.wallet===void 0)throw new G("eth_signTransaction","Provider must be defined with a wallet. Ensure that the provider is defined and connected to the network.",{provider:c});if(void 0===b[0].from)throw new G("eth_signTransaction","From field is required in the transaction object.",{provider:c});let[d]=b;try{return await (await c.getSigner(d.from)).signTransaction(d)}catch(c){throw new H("eth_signTransaction()",'Method "eth_signTransaction" failed.',{params:e(b),url:a.httpClient.baseURL},c)}},ca=async(a,b,c)=>{if(2!==b.length||"string"!=typeof b[0]||!$.Address.isValid(b[0])||"object"!=typeof b[1]&&"string"!=typeof b[1])throw new G("eth_signTypedDataV4",'Invalid input params for "eth_signTypedDataV4" method. See https://docs.metamask.io/wallet/reference/eth_signtypeddata_v4/ for details.',{params:b});if(c?.wallet===void 0||await c.getSigner(b[0])===null)throw new G("eth_signTypedDataV4",`Provider must be defined with a wallet. Ensure that the provider is defined, connected to the network and has the wallet with the address ${b[0]} into it.`,{provider:c});let[d]=b,f;if("string"==typeof b[1])try{let a=JSON.parse(b[1]),c="object"==typeof a&&null!==a&&!Array.isArray(a),d="primaryType"in a&&"domain"in a&&"types"in a&&"message"in a;if(!c||!d)throw new G("eth_signTypedDataV4","Invalid typedData structure",{params:b});f=a}catch(a){throw new G("eth_signTypedData_v4","Invalid JSON string for typed data parameter",{params:b},a)}else f=b[1];if("object"!=typeof f.domain||null===f.domain)throw new G("eth_signTypedDataV4","Invalid typedData structure",{params:b});try{return await (await c.getSigner(d)).signTypedData(f.domain,f.types,f.message,f.primaryType)}catch(c){throw new H("eth_signTypedDataV4",'Method "eth_signTypedDataV4" failed.',{params:e(b),url:a.httpClient.baseURL},c)}},cb=async(a,b,c)=>{if(void 0===c)throw new H("eth_subscribe()",'Method "eth_subscribe" failed. Provider is not defined.',{url:a.httpClient.baseURL,params:e(b)});if("newHeads"!==b[0]&&"logs"!==b[0])throw new G("eth_subscribe()",'Method "eth_subscribe" failed. Invalid subscription type param.',{url:a.httpClient.baseURL,params:e(b)});if(void 0===c.getPollInstance()){let d=await a.blocks.getBestBlockCompressed();if(null!=d)c.subscriptionManager.currentBlockNumber=d.number;else throw new J("eth_subscribe()",'Method "eth_subscribe" failed. Best block not available.',{url:a.httpClient.baseURL,params:e(b)});c.startSubscriptionsPolling()}let d=$.Hex.random(16).digits;return b.includes("newHeads")&&(c.subscriptionManager.newHeadsSubscription={subscriptionId:d,subscription:{type:"newHeads"}}),b.includes("logs")&&c.subscriptionManager.logSubscriptions.set(d,{type:"logs",options:b[1]}),d},cc=async a=>{try{let b=await a.blocks.getBestBlockCompressed(),c=await a.blocks.getGenesisBlock(),d=null!==c?$.HexInt.of(Math.floor((Date.now()-c.timestamp)/1e4)).toString():null;if(null!==b){if(Math.floor(Date.now()/1e3)-b.timestamp<11e3)return!1;let c=await by(a);return{currentBlock:bp.formatToRPCStandard(b,c),highestBlock:d,startingBlock:null}}return{currentBlock:null,highestBlock:d,startingBlock:null}}catch(b){throw new H("eth_syncing()",'Method "eth_syncing" failed.',{url:a.httpClient.baseURL,innerError:e(b)})}},cd=async(a,b)=>{let c=!1;if(void 0===b)throw new H("eth_unsubscribe()",'Method "eth_unsubscribe" failed. Provider is not defined.',{params:e(a)});let d=a[0];return void 0!==b.subscriptionManager.newHeadsSubscription&&d===b.subscriptionManager.newHeadsSubscription.subscriptionId?(b.subscriptionManager.newHeadsSubscription=void 0,c=!0):c=b.subscriptionManager.logSubscriptions.delete(d),b.isThereActiveSubscriptions()||b.stopSubscriptionsPolling(),await Promise.resolve(c)},ce=async a=>{try{let b=await a.blocks.getBestBlockCompressed();if(null===b)throw new H("evm_mine()",'Method "evm_mine" failed. No best block found.',{url:a.httpClient.baseURL});return await aD.SyncPoll(()=>a.blocks.getHeadBlock()).waitUntil(a=>a!==b),null}catch(b){throw b instanceof H?b:new H("evm_mine()",'Method "evm_mine" failed.',{url:a.httpClient.baseURL,innerError:e(b)})}},cf=async a=>{try{return await a.nodes.isHealthy()}catch(b){throw new H("net_listening()",'Method "net_listening" failed.',{url:a.httpClient.baseURL,innerError:e(b)})}},cg=async a=>{try{return(await a.nodes.getNodes()).length}catch(b){throw new H("net_peerCount()",'Method "net_peerCount" failed.',{url:a.httpClient.baseURL,innerError:e(b)})}},ch=async a=>await by(a),ci=async()=>await Promise.resolve({}),cj=async a=>{if(1!==a.length||"string"!=typeof a[0]||!$.Address.isValid(a[0]))throw new G("txpool_contentFrom()",'Invalid input params for "txpool_contentFrom" method. See https://www.quicknode.com/docs/ethereum/txpool_contentFrom for details.',{params:a});return await Promise.resolve({})},ck=async()=>await Promise.resolve({}),cl=async()=>await Promise.resolve({}),cm=async()=>await Promise.resolve("thor"),cn=async a=>{if(1!==a.length||"string"!=typeof a[0]||!$.Hex.isValid(a[0]))throw new G("web3_sha3","Invalid input params for \"web3_sha3\" method. See 'https://docs.alchemy.com/reference/web3-sha3' for details.",{params:a});return await Promise.resolve($.Keccak256.of(a[0]).toString())},co=(a,b)=>({eth_blockNumber:async()=>await bL(a),eth_chainId:async()=>await by(a),eth_getBalance:async b=>await bQ(a,b),eth_getCode:async b=>await bU(a,b),eth_getStorageAt:async b=>await bY(a,b),eth_estimateGas:async b=>await bN(a,b),eth_call:async b=>await bM(a,b),eth_sendRawTransaction:async b=>await b7(a,b),eth_getLogs:async b=>await bX(a,b),eth_getBlockByHash:async b=>await bD(a,b),eth_getBlockByNumber:async b=>await bF(a,b),eth_accounts:async()=>await bK(b),eth_gasPrice:async()=>await bP(a),eth_getTransactionByHash:async b=>await bZ(a,b),eth_getTransactionCount:async a=>await b0(a),eth_getTransactionReceipt:async b=>await bB(a,b),eth_sendTransaction:async c=>await b8(a,c,b),eth_syncing:async()=>await cc(a),net_version:async()=>await ch(a),web3_clientVersion:async()=>await cm(),eth_subscribe:async c=>await cb(a,c,b),eth_unsubscribe:async a=>await cd(a,b),debug_traceTransaction:async b=>await bC(a,b),debug_traceCall:async b=>await bH(a,b),evm_increaseTime:async()=>await ce(a),evm_mine:async()=>await ce(a),eth_getBlockTransactionCountByHash:async b=>await bS(a,b),eth_getBlockTransactionCountByNumber:async b=>await bT(a,b),eth_getTransactionByBlockHashAndIndex:async b=>await b$(a,b),eth_getTransactionByBlockNumberAndIndex:async b=>await b_(a,b),eth_getUncleByBlockHashAndIndex:async a=>await b1(a),eth_getUncleByBlockNumberAndIndex:async a=>await b2(a),eth_getUncleCountByBlockHash:async a=>await b3(a),eth_getUncleCountByBlockNumber:async a=>await b4(a),eth_requestAccounts:async()=>await b6(b),net_listening:async()=>await cf(a),net_peerCount:async()=>await cg(a),eth_getBlockReceipts:async b=>await bR(a,b),eth_signTransaction:async c=>await b9(a,c,b),web3_sha3:async a=>await cn(a),txpool_inspect:async()=>await ck(),txpool_content:async()=>await ci(),txpool_contentFrom:async a=>await cj(a),txpool_status:async()=>await cl(),debug_traceBlockByHash:async b=>await bE(a,b),debug_traceBlockByNumber:async b=>await bG(a,b),eth_signTypedData_v4:async c=>await ca(a,c,b),eth_maxPriorityFeePerGas:async b=>await b5(a),eth_feeHistory:async b=>await bO(a,b)}),cp=class extends _.EventEmitter{constructor(a,b,c=!1){super(),this.thorClient=a,this.wallet=b,this.enableDelegation=c}subscriptionManager={logSubscriptions:new Map,currentBlockNumber:0};pollInstance;destroy(){this.thorClient.destroy(),void 0!==this.pollInstance&&(this.pollInstance.stopListen(),this.pollInstance=void 0)}async request(a){if(!Object.values(ao).map(a=>a.toString()).includes(a.method))throw new F("VeChainProvider.request()","Method not found",{code:-32601,message:"Method not found"});let b=co(this.thorClient,this);if(!(a.method in b))throw new K(a.method,"Method not implemented",{code:-32004,message:"Method not supported"});return await b[a.method](a.params)}startSubscriptionsPolling(){let a=!1;return void 0===this.pollInstance&&(this.pollInstance=aD.createEventPoll(async()=>{let a=[],b=await this.getCurrentBlock();if(null!==b){if(void 0!==this.subscriptionManager.newHeadsSubscription&&a.push({method:"eth_subscription",params:{subscription:this.subscriptionManager.newHeadsSubscription.subscriptionId,result:b}}),this.subscriptionManager.logSubscriptions.size>0){let b=await this.getLogsRPC();a.push(...b)}this.subscriptionManager.currentBlockNumber++}return a},5e3).onData(a=>{a.forEach(a=>{this.emit("message",a)})}),this.pollInstance.startListen(),a=!0),a}stopSubscriptionsPolling(){let a=!1;return void 0!==this.pollInstance&&(this.pollInstance.stopListen(),this.pollInstance=void 0,a=!0),a}isThereActiveSubscriptions(){return this.subscriptionManager.logSubscriptions.size>0||void 0!==this.subscriptionManager.newHeadsSubscription}getPollInstance(){return this.pollInstance}async getLogsRPC(){let a=Array.from(this.subscriptionManager.logSubscriptions.entries()).map(async([a,b])=>{let c=$.HexInt.of(this.subscriptionManager.currentBlockNumber).toString(),d={address:b.options?.address,fromBlock:c,toBlock:c,topics:b.options?.topics};return{method:"eth_subscription",params:{subscription:a,result:await bX(this.thorClient,[d])}}});return(await Promise.all(a)).filter(a=>a.params.result.length>0)}async getCurrentBlock(){let a=null;if(this.isThereActiveSubscriptions()){let b=await this.thorClient.blocks.getBlockCompressed(this.subscriptionManager.currentBlockNumber);null!=b&&(a=b)}return a}async getSigner(a){return void 0===this.wallet?null:await this.wallet?.getSigner(this,a)}async resolveName(a){return await aJ.resolveName(this.thorClient,a)}async lookupAddress(a){return await aJ.lookupAddress(this.thorClient,a)}},cq=class extends cp{debug;buildHardhatErrorFunctionCallback;rpcConfiguration;constructor(a,b,c,d=!1,e=!1,f={ethGetTransactionCountMustReturn0:!1}){super(new a7(new am(b)),a,e),this.debug=d,this.rpcConfiguration=f,this.buildHardhatErrorFunctionCallback=c}async send(a,b){return await this.request({method:a,params:b})}async sendAsync(a,b){try{let c=await this.request({method:a.method,params:a.params});b(null,{id:a.id,jsonrpc:"2.0",result:c})}catch(c){b(c,{id:a.id,jsonrpc:"2.0"})}}async request(a){let b=this.rpcConfiguration.ethGetTransactionCountMustReturn0&&"eth_getTransactionCount"===a.method;try{if(this.debug){let b=await this.wallet.getAddresses(),c=await this.wallet.getGasPayer();(0,af.VeChainSDKLogger)("log").log({title:`Sending request - ${a.method}`,messages:[`params: ${e(a.params)}`,`accounts: ${e(b)}`,`gasPayer: ${e(c)}`,`url: ${this.thorClient.httpClient.baseURL}`]})}let c=b?"0x0":await super.request({method:a.method,params:a.params});return this.debug&&(0,af.VeChainSDKLogger)("log").log({title:`Get request - ${a.method} result`,messages:[`result: ${e(c)}`]}),c}catch(b){if(this.debug&&(0,af.VeChainSDKLogger)("error").log(new H(a.method,`Error on request - ${a.method}`,{args:a})),b instanceof L)throw b;if(b instanceof h)throw this.buildHardhatErrorFunctionCallback(`Error on request ${a.method}: ${b.innerError}`,b)}}},cr=a.i(2832),cs=a.i(54791),ct=a.i(64017),cu=a.i(68014),cv=class extends cu.Subscribable{constructor(a={}){super(),this.config=a,this.#a=new Map}#a;build(a,b,c){let d=b.queryKey,e=b.queryHash??(0,cr.hashQueryKeyByOptions)(d,b),f=this.get(e);return f||(f=new cs.Query({client:a,queryKey:d,queryHash:e,options:a.defaultQueryOptions(b),state:c,defaultOptions:a.getQueryDefaults(d)}),this.add(f)),f}add(a){this.#a.has(a.queryHash)||(this.#a.set(a.queryHash,a),this.notify({type:"added",query:a}))}remove(a){let b=this.#a.get(a.queryHash);b&&(a.destroy(),b===a&&this.#a.delete(a.queryHash),this.notify({type:"removed",query:a}))}clear(){ct.notifyManager.batch(()=>{this.getAll().forEach(a=>{this.remove(a)})})}get(a){return this.#a.get(a)}getAll(){return[...this.#a.values()]}find(a){let b={exact:!0,...a};return this.getAll().find(a=>(0,cr.matchQuery)(b,a))}findAll(a={}){let b=this.getAll();return Object.keys(a).length>0?b.filter(b=>(0,cr.matchQuery)(a,b)):b}notify(a){ct.notifyManager.batch(()=>{this.listeners.forEach(b=>{b(a)})})}onFocus(){ct.notifyManager.batch(()=>{this.getAll().forEach(a=>{a.onFocus()})})}onOnline(){ct.notifyManager.batch(()=>{this.getAll().forEach(a=>{a.onOnline()})})}},cw=a.i(74499),cx=a.i(9782),cy=class extends cw.Removable{#b;#c;#d;#e;constructor(a){super(),this.#b=a.client,this.mutationId=a.mutationId,this.#d=a.mutationCache,this.#c=[],this.state=a.state||{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0},this.setOptions(a.options),this.scheduleGc()}setOptions(a){this.options=a,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(a){this.#c.includes(a)||(this.#c.push(a),this.clearGcTimeout(),this.#d.notify({type:"observerAdded",mutation:this,observer:a}))}removeObserver(a){this.#c=this.#c.filter(b=>b!==a),this.scheduleGc(),this.#d.notify({type:"observerRemoved",mutation:this,observer:a})}optionalRemove(){this.#c.length||("pending"===this.state.status?this.scheduleGc():this.#d.remove(this))}continue(){return this.#e?.continue()??this.execute(this.state.variables)}async execute(a){let b=()=>{this.#f({type:"continue"})},c={client:this.#b,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#e=(0,cx.createRetryer)({fn:()=>this.options.mutationFn?this.options.mutationFn(a,c):Promise.reject(Error("No mutationFn found")),onFail:(a,b)=>{this.#f({type:"failed",failureCount:a,error:b})},onPause:()=>{this.#f({type:"pause"})},onContinue:b,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#d.canRun(this)});let d="pending"===this.state.status,e=!this.#e.canStart();try{if(d)b();else{this.#f({type:"pending",variables:a,isPaused:e}),await this.#d.config.onMutate?.(a,this,c);let b=await this.options.onMutate?.(a,c);b!==this.state.context&&this.#f({type:"pending",context:b,variables:a,isPaused:e})}let f=await this.#e.start();return await this.#d.config.onSuccess?.(f,a,this.state.context,this,c),await this.options.onSuccess?.(f,a,this.state.context,c),await this.#d.config.onSettled?.(f,null,this.state.variables,this.state.context,this,c),await this.options.onSettled?.(f,null,a,this.state.context,c),this.#f({type:"success",data:f}),f}catch(b){try{throw await this.#d.config.onError?.(b,a,this.state.context,this,c),await this.options.onError?.(b,a,this.state.context,c),await this.#d.config.onSettled?.(void 0,b,this.state.variables,this.state.context,this,c),await this.options.onSettled?.(void 0,b,a,this.state.context,c),b}finally{this.#f({type:"error",error:b})}}finally{this.#d.runNext(this)}}#f(a){this.state=(b=>{switch(a.type){case"failed":return{...b,failureCount:a.failureCount,failureReason:a.error};case"pause":return{...b,isPaused:!0};case"continue":return{...b,isPaused:!1};case"pending":return{...b,context:a.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:a.isPaused,status:"pending",variables:a.variables,submittedAt:Date.now()};case"success":return{...b,data:a.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...b,data:void 0,error:a.error,failureCount:b.failureCount+1,failureReason:a.error,isPaused:!1,status:"error"}}})(this.state),ct.notifyManager.batch(()=>{this.#c.forEach(b=>{b.onMutationUpdate(a)}),this.#d.notify({mutation:this,type:"updated",action:a})})}},cz=cu,cA=class extends cz.Subscribable{constructor(a={}){super(),this.config=a,this.#g=new Set,this.#h=new Map,this.#i=0}#g;#h;#i;build(a,b,c){let d=new cy({client:a,mutationCache:this,mutationId:++this.#i,options:a.defaultMutationOptions(b),state:c});return this.add(d),d}add(a){this.#g.add(a);let b=cB(a);if("string"==typeof b){let c=this.#h.get(b);c?c.push(a):this.#h.set(b,[a])}this.notify({type:"added",mutation:a})}remove(a){if(this.#g.delete(a)){let b=cB(a);if("string"==typeof b){let c=this.#h.get(b);if(c)if(c.length>1){let b=c.indexOf(a);-1!==b&&c.splice(b,1)}else c[0]===a&&this.#h.delete(b)}}this.notify({type:"removed",mutation:a})}canRun(a){let b=cB(a);if("string"!=typeof b)return!0;{let c=this.#h.get(b),d=c?.find(a=>"pending"===a.state.status);return!d||d===a}}runNext(a){let b=cB(a);if("string"!=typeof b)return Promise.resolve();{let c=this.#h.get(b)?.find(b=>b!==a&&b.state.isPaused);return c?.continue()??Promise.resolve()}}clear(){ct.notifyManager.batch(()=>{this.#g.forEach(a=>{this.notify({type:"removed",mutation:a})}),this.#g.clear(),this.#h.clear()})}getAll(){return Array.from(this.#g)}find(a){let b={exact:!0,...a};return this.getAll().find(a=>(0,cr.matchMutation)(b,a))}findAll(a={}){return this.getAll().filter(b=>(0,cr.matchMutation)(a,b))}notify(a){ct.notifyManager.batch(()=>{this.listeners.forEach(b=>{b(a)})})}resumePausedMutations(){let a=this.getAll().filter(a=>a.state.isPaused);return ct.notifyManager.batch(()=>Promise.all(a.map(a=>a.continue().catch(cr.noop))))}};function cB(a){return a.options.scope?.id}var cC=a.i(69435),cD=a.i(25982);function cE(a){return{onFetch:(b,c)=>{let d=b.options,e=b.fetchOptions?.meta?.fetchMore?.direction,f=b.state.data?.pages||[],g=b.state.data?.pageParams||[],h={pages:[],pageParams:[]},i=0,j=async()=>{let c=!1,j=(0,cr.ensureQueryFn)(b.options,b.fetchOptions),k=async(a,d,e)=>{if(c)return Promise.reject();if(null==d&&a.pages.length)return Promise.resolve(a);let f=(()=>{let a={client:b.client,queryKey:b.queryKey,pageParam:d,direction:e?"backward":"forward",meta:b.options.meta};return Object.defineProperty(a,"signal",{enumerable:!0,get:()=>(b.signal.aborted?c=!0:b.signal.addEventListener("abort",()=>{c=!0}),b.signal)}),a})(),g=await j(f),{maxPages:h}=b.options,i=e?cr.addToStart:cr.addToEnd;return{pages:i(a.pages,g,h),pageParams:i(a.pageParams,d,h)}};if(e&&f.length){let a="backward"===e,b={pages:f,pageParams:g},c=(a?function(a,{pages:b,pageParams:c}){return b.length>0?a.getPreviousPageParam?.(b[0],b,c[0],c):void 0}:cF)(d,b);h=await k(b,c,a)}else{let b=a??f.length;do{let a=0===i?g[0]??d.initialPageParam:cF(d,h);if(i>0&&null==a)break;h=await k(h,a),i++}while(i<b)}return h};b.options.persister?b.fetchFn=()=>b.options.persister?.(j,{client:b.client,queryKey:b.queryKey,meta:b.options.meta,signal:b.signal},c):b.fetchFn=j}}}function cF(a,{pages:b,pageParams:c}){let d=b.length-1;return b.length>0?a.getNextPageParam(b[d],b,c[d],c):void 0}var cG=class{#j;#d;#k;#l;#m;#n;#o;#p;constructor(a={}){this.#j=a.queryCache||new cv,this.#d=a.mutationCache||new cA,this.#k=a.defaultOptions||{},this.#l=new Map,this.#m=new Map,this.#n=0}mount(){this.#n++,1===this.#n&&(this.#o=cC.focusManager.subscribe(async a=>{a&&(await this.resumePausedMutations(),this.#j.onFocus())}),this.#p=cD.onlineManager.subscribe(async a=>{a&&(await this.resumePausedMutations(),this.#j.onOnline())}))}unmount(){this.#n--,0===this.#n&&(this.#o?.(),this.#o=void 0,this.#p?.(),this.#p=void 0)}isFetching(a){return this.#j.findAll({...a,fetchStatus:"fetching"}).length}isMutating(a){return this.#d.findAll({...a,status:"pending"}).length}getQueryData(a){let b=this.defaultQueryOptions({queryKey:a});return this.#j.get(b.queryHash)?.state.data}ensureQueryData(a){let b=this.defaultQueryOptions(a),c=this.#j.build(this,b),d=c.state.data;return void 0===d?this.fetchQuery(a):(a.revalidateIfStale&&c.isStaleByTime((0,cr.resolveStaleTime)(b.staleTime,c))&&this.prefetchQuery(b),Promise.resolve(d))}getQueriesData(a){return this.#j.findAll(a).map(({queryKey:a,state:b})=>[a,b.data])}setQueryData(a,b,c){let d=this.defaultQueryOptions({queryKey:a}),e=this.#j.get(d.queryHash),f=e?.state.data,g=(0,cr.functionalUpdate)(b,f);if(void 0!==g)return this.#j.build(this,d).setData(g,{...c,manual:!0})}setQueriesData(a,b,c){return ct.notifyManager.batch(()=>this.#j.findAll(a).map(({queryKey:a})=>[a,this.setQueryData(a,b,c)]))}getQueryState(a){let b=this.defaultQueryOptions({queryKey:a});return this.#j.get(b.queryHash)?.state}removeQueries(a){let b=this.#j;ct.notifyManager.batch(()=>{b.findAll(a).forEach(a=>{b.remove(a)})})}resetQueries(a,b){let c=this.#j;return ct.notifyManager.batch(()=>(c.findAll(a).forEach(a=>{a.reset()}),this.refetchQueries({type:"active",...a},b)))}cancelQueries(a,b={}){let c={revert:!0,...b};return Promise.all(ct.notifyManager.batch(()=>this.#j.findAll(a).map(a=>a.cancel(c)))).then(cr.noop).catch(cr.noop)}invalidateQueries(a,b={}){return ct.notifyManager.batch(()=>(this.#j.findAll(a).forEach(a=>{a.invalidate()}),a?.refetchType==="none")?Promise.resolve():this.refetchQueries({...a,type:a?.refetchType??a?.type??"active"},b))}refetchQueries(a,b={}){let c={...b,cancelRefetch:b.cancelRefetch??!0};return Promise.all(ct.notifyManager.batch(()=>this.#j.findAll(a).filter(a=>!a.isDisabled()&&!a.isStatic()).map(a=>{let b=a.fetch(void 0,c);return c.throwOnError||(b=b.catch(cr.noop)),"paused"===a.state.fetchStatus?Promise.resolve():b}))).then(cr.noop)}fetchQuery(a){let b=this.defaultQueryOptions(a);void 0===b.retry&&(b.retry=!1);let c=this.#j.build(this,b);return c.isStaleByTime((0,cr.resolveStaleTime)(b.staleTime,c))?c.fetch(b):Promise.resolve(c.state.data)}prefetchQuery(a){return this.fetchQuery(a).then(cr.noop).catch(cr.noop)}fetchInfiniteQuery(a){return a.behavior=cE(a.pages),this.fetchQuery(a)}prefetchInfiniteQuery(a){return this.fetchInfiniteQuery(a).then(cr.noop).catch(cr.noop)}ensureInfiniteQueryData(a){return a.behavior=cE(a.pages),this.ensureQueryData(a)}resumePausedMutations(){return cD.onlineManager.isOnline()?this.#d.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#j}getMutationCache(){return this.#d}getDefaultOptions(){return this.#k}setDefaultOptions(a){this.#k=a}setQueryDefaults(a,b){this.#l.set((0,cr.hashKey)(a),{queryKey:a,defaultOptions:b})}getQueryDefaults(a){let b=[...this.#l.values()],c={};return b.forEach(b=>{(0,cr.partialMatchKey)(a,b.queryKey)&&Object.assign(c,b.defaultOptions)}),c}setMutationDefaults(a,b){this.#m.set((0,cr.hashKey)(a),{mutationKey:a,defaultOptions:b})}getMutationDefaults(a){let b=[...this.#m.values()],c={};return b.forEach(b=>{(0,cr.partialMatchKey)(a,b.mutationKey)&&Object.assign(c,b.defaultOptions)}),c}defaultQueryOptions(a){if(a._defaulted)return a;let b={...this.#k.queries,...this.getQueryDefaults(a.queryKey),...a,_defaulted:!0};return b.queryHash||(b.queryHash=(0,cr.hashQueryKeyByOptions)(b.queryKey,b)),void 0===b.refetchOnReconnect&&(b.refetchOnReconnect="always"!==b.networkMode),void 0===b.throwOnError&&(b.throwOnError=!!b.suspense),!b.networkMode&&b.persister&&(b.networkMode="offlineFirst"),b.queryFn===cr.skipToken&&(b.enabled=!1),b}defaultMutationOptions(a){return a?._defaulted?a:{...this.#k.mutations,...a?.mutationKey&&this.getMutationDefaults(a.mutationKey),...a,_defaulted:!0}}clear(){this.#j.clear(),this.#d.clear()}},cH=a.i(17771),cI=a.i(41554);let cJ=new cG;a7.fromUrl(cI.NODE_URL);let cK=cI.WALLET_CONNECT_PROJECT_ID?{projectId:cI.WALLET_CONNECT_PROJECT_ID,metadata:{name:cI.APP_TITLE,description:cI.APP_DESCRIPTION,url:window.location.origin,icons:cI.APP_ICONS}}:void 0;function cL({children:a}){return console.log("DAppKitProviderWrapper initialized with node:",cI.NODE_URL,"walletConnectOptions:",cK),(0,b.jsx)(cH.QueryClientProvider,{client:cJ,children:(0,b.jsx)(c.DAppKitProvider,{node:cI.NODE_URL,usePersistence:!0,walletConnectOptions:cK,logLevel:"DEBUG",children:a})})}}];

//# sourceMappingURL=B3TR%20BEACH_b3tr-beach-next_src_app_DAppKitProviderWrapper_tsx_22615a12._.js.map